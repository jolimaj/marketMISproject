import{c as b,o as n,w as i,a,e as _,b as u,m as j,d as g,F as S,r as B,t as p,v as O,n as A,f as V,h as F,i as C,j as N,l as I}from"./app-BanCskK_.js";import{l as x,p as z}from"./pickBy-CADBopQR.js";import{A as L}from"./AppLayout-C4XkhOEP.js";import{B as M}from"./BaseTable-DqakuR4C.js";import{P}from"./Pagination-CEk2Xf0e.js";import{S as R}from"./SearchFilter-Ds2KTKLN.js";import{B as T}from"./Badge-JyrJPy6d.js";import{I as U}from"./Icons-DEAzJamH.js";import{c as k}from"./helper-ugt-wfEi.js";import{F as D}from"./FlashMessage-BuMPzACp.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-BNihBzbJ.js";import"./Footer-qu4Jt-lS.js";const J={__name:"Index",props:{stalls:Object,stallsCategories:Object,filters:Object},setup(d,{expose:t}){var f,r;t();const m=["Name","Admins"],e=d,l=F({search:(f=e==null?void 0:e.filters)==null?void 0:f.search,gender:(r=e==null?void 0:e.filters)==null?void 0:r.gender});C(l,x.throttle(()=>{N.get("/admin/system-setting/rental-space",z(l),{preserveState:!0})},150),{deep:!0});const v=s=>{let c={color:"blue",status:"Vacant"};return s===3&&(c={color:"orange",status:"Reserved"}),s===1&&(c={color:"green",status:"Occupied"}),s===4&&(c={color:"red",status:"Under Maintenance"}),c};function h(){l.search="",l.category=null,Object.assign(l,x.mapValues(l,()=>null))}function y(s){return(s==null?void 0:s.id)===5?` ${k(s==null?void 0:s.amount)} for every area of square meter`:(s==null?void 0:s.id)===4?` ${k(s==null?void 0:s.amount)} for every table`:"-"}const o={headers:m,props:e,form:l,status:v,reset:h,handleFeesChange:y,watch:C,reactive:F,get Link(){return I},get router(){return N},get throttle(){return x.throttle},get mapValues(){return x.mapValues},get pickBy(){return z},AppLayout:L,BaseTable:M,Pagination:P,SearchFilter:R,Badge:T,Icon:U,get formatAmount(){return k},FlashMessage:D};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"flex items-center justify-between mb-6"},G=["value"],H={class:"px-4 py-3 capitalize"},K={class:"px-4 py-3 capitalize"},Q={class:"px-4 py-3 capitalize"},W={class:"px-4 py-3"},Y={class:"px-4 py-3 capitalize"},Z={class:"w-px border-t"},$={key:0},ee={class:"mt-6 flex justify-center"};function te(d,t,m,e,l,v){return n(),b(e.AppLayout,{title:"Stalls"},{header:i(()=>[...t[2]||(t[2]=[a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stalls ",-1)])]),default:i(()=>{var h,y;return[t[8]||(t[8]=a("h1",{class:"mb-8 text-3xl font-bold text-primary"},"Rental Space",-1)),a("div",q,[d.$page.props.flash.success?(n(),b(e.FlashMessage,{key:0,message:d.$page.props.flash.success,type:"success"},null,8,["message"])):_("",!0),d.$page.props.flash.error?(n(),b(e.FlashMessage,{key:1,message:d.$page.props.flash.error,type:"error"},null,8,["message"])):_("",!0),a("div",X,[u(e.SearchFilter,{modelValue:e.form.search,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.search=o),class:"mr-4 w-full max-w-md",onReset:e.reset},{default:i(()=>[t[4]||(t[4]=a("label",{class:"block text-gray-700"},"Stall Category:",-1)),j(a("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.category=o),class:"form-select mt-1 w-full"},[t[3]||(t[3]=a("option",{value:null},"All",-1)),(n(!0),g(S,null,B(m.stallsCategories,o=>(n(),g("option",{key:o.id,value:o.id},p(o.name),9,G))),128))],512),[[O,e.form.category]])]),_:1},8,["modelValue"]),u(e.Link,{type:"submit",class:A([{"opacity-25":e.form.processing},"bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"]),disabled:e.form.processing,href:"/admin/system-setting/rental-space/create"},{default:i(()=>[...t[5]||(t[5]=[V("Create New",-1)])]),_:1},8,["class","disabled"])]),u(e.BaseTable,{headers:e.headers,data:(h=m.stalls)==null?void 0:h.data},{header:i(()=>[...t[6]||(t[6]=[a("th",{class:"px-4 py-3 text-left"},"Name",-1),a("th",{class:"px-4 py-3 text-left"},"Size",-1),a("th",{class:"px-4 py-3 text-left"},"Category",-1),a("th",{class:"px-4 py-3 text-left"},"Fee",-1),a("th",{class:"px-4 py-3 text-left"},"Status",-1)])]),row:i(({data:o})=>{var f;return[(n(!0),g(S,null,B(o,(r,s)=>{var c,w;return n(),g("tr",{key:m.stalls.id,class:"hover:bg-gray-50"},[a("td",H,p(r.name),1),a("td",K,p(r!=null&&r.size?`${(c=JSON.parse(r.size))==null?void 0:c.length} X ${(w=JSON.parse(r.size))==null?void 0:w.width}`:"-"),1),a("td",Q,p(r.categories.name),1),a("td",W,p(e.handleFeesChange(r==null?void 0:r.fee)),1),a("td",Y,[u(e.Badge,{color:e.status(r.status).color},{default:i(()=>[V(p(e.status(r.status).status),1)]),_:2},1032,["color"])]),a("td",Z,[u(e.Link,{class:"flex items-center px-4",href:d.route("admin.stalls.edit",r.id),tabindex:"-1"},{default:i(()=>[u(e.Icon,{name:"cheveron-right",class:"block w-6 h-6 fill-primary"})]),_:1},8,["href"])])])}),128)),((f=m.stalls)==null?void 0:f.total)===0?(n(),g("tr",$,[...t[7]||(t[7]=[a("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):_("",!0)]}),_:1},8,["data"])]),a("div",ee,[u(e.Pagination,{links:(y=m.stalls)==null?void 0:y.links},null,8,["links"])])]}),_:1})}const ge=E(J,[["render",te],["__file","Index.vue"]]);export{ge as default};
