import{c as j,o as p,w as n,a as t,b as c,k as I,d as _,F as V,r as B,t as m,v as A,n as P,f as F,e as D,h as L,i as N,Q as C,S as M}from"./app-uXddmEpz.js";import{l as k,p as O}from"./pickBy-Cz0_Eu6Y.js";import{A as T}from"./AppLayout-Br8Pf_X-.js";import{B as H}from"./BaseTable-BlSLnjYp.js";import{P as U}from"./Pagination-CeXYWUig.js";import{S as q}from"./SearchFilter-mzsd348G.js";import{B as E}from"./Badge-DyQTjnI6.js";import{I as J}from"./Icons-C3pYYq2K.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-C5gnPx-H.js";import"./Footer-Xx_KaGDa.js";const R={__name:"Index",props:{stalls:Object,stallsCategories:Object,filters:Object},setup(v,{expose:s}){var x,a;s();const i=["ID","Name","Admins"],e=v,l=L({search:(x=e==null?void 0:e.filters)==null?void 0:x.search,gender:(a=e==null?void 0:e.filters)==null?void 0:a.gender});N(l,k.throttle(()=>{C.get("/admin/system-setting/stalls",O(l),{preserveState:!0})},150),{deep:!0});const w=u=>{let o={color:"blue",status:"Vacant"};return u===3&&(o={color:"orange",status:"Reserved"}),u===1&&(o={color:"green",status:"Occupied"}),u===4&&(o={color:"red",status:"Under Maintenance"}),o};function h(){l.search="",l.category=null,Object.assign(l,k.mapValues(l,()=>null))}function b(u){return u.map(o=>{const{is_daily:d,is_monthly:y,is_styro:f,is_per_kilo:S,type:ne,amount:z}=o,g=` â‚±${Number(z).toLocaleString("en-PH",{minimumFractionDigits:2})}`;return f&&S&&d?`Per styrofoam of product: ${g}/day`:S&&d?`Per kilo of product: ${g}/day`:!y&&!d&&!f&&!S?`One time monthly fee: ${g}`:d&&!y&&!f&&!S?`Daily Occupancy Fee: ${g}`:`Table Fee:${g}/Month`}).join("<br>")}const r={headers:i,props:e,form:l,status:w,reset:h,handleFeesChange:b,watch:N,reactive:L,get Link(){return M},get router(){return C},get throttle(){return k.throttle},get mapValues(){return k.mapValues},get pickBy(){return O},AppLayout:T,BaseTable:H,Pagination:U,SearchFilter:q,Badge:E,Icon:J};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"flex items-center justify-between mb-6"},W=["value"],X={class:"px-4 py-3"},Y={class:"px-4 py-3 capitalize"},Z={class:"px-4 py-3 capitalize"},$={class:"px-4 py-3 capitalize"},ee={class:"px-4 py-3 capitalize"},te=["innerHTML"],se={class:"px-4 py-3 capitalize"},ae={class:"w-px border-t"},re={key:0},oe={class:"mt-6 flex justify-center"};function le(v,s,i,e,l,w){return p(),j(e.AppLayout,{title:"Stalls"},{header:n(()=>s[2]||(s[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stalls ",-1)])),default:n(()=>{var h,b;return[s[8]||(s[8]=t("h1",{class:"mb-8 text-3xl font-bold text-primary"},"Stalls",-1)),t("div",G,[t("div",K,[c(e.SearchFilter,{modelValue:e.form.search,"onUpdate:modelValue":s[1]||(s[1]=r=>e.form.search=r),class:"mr-4 w-full max-w-md",onReset:e.reset},{default:n(()=>[s[4]||(s[4]=t("label",{class:"block text-gray-700"},"Stall Category:",-1)),I(t("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>e.form.category=r),class:"form-select mt-1 w-full"},[s[3]||(s[3]=t("option",{value:null},"All",-1)),(p(!0),_(V,null,B(i.stallsCategories,r=>(p(),_("option",{key:r.id,value:r.id},m(r.name),9,W))),128))],512),[[A,e.form.category]])]),_:1,__:[4]},8,["modelValue"]),c(e.Link,{type:"submit",class:P([{"opacity-25":e.form.processing},"bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"]),disabled:e.form.processing,href:"/admin/system-setting/stalls/create"},{default:n(()=>s[5]||(s[5]=[F("Add Stall")])),_:1,__:[5]},8,["class","disabled"])]),c(e.BaseTable,{headers:e.headers,data:(h=i.stalls)==null?void 0:h.data},{header:n(()=>s[6]||(s[6]=[t("th",{class:"px-4 py-3 text-left"},"Stall ID",-1),t("th",{class:"px-4 py-3 text-left"},"Name",-1),t("th",{class:"px-4 py-3 text-left"},"Size",-1),t("th",{class:"px-4 py-3 text-left"},"Area of Square Meter",-1),t("th",{class:"px-4 py-3 text-left"},"Category",-1),t("th",{class:"px-4 py-3 text-left"},"Fee",-1),t("th",{class:"px-4 py-3 text-left"},"Status",-1)])),row:n(({data:r})=>{var x;return[(p(!0),_(V,null,B(r,(a,u)=>{var o,d,y,f;return p(),_("tr",{key:i.stalls.id,class:"hover:bg-gray-50"},[t("td",X,m(a.id),1),t("td",Y,m(a.name),1),t("td",Z,m(`Longitude: ${(o=JSON.parse(a.size))==null?void 0:o.long}, Latitude: ${(d=JSON.parse(a.size))==null?void 0:d.lat}`),1),t("td",$,m(a.area_of_sqr_meter),1),t("td",ee,m(a.categories.name),1),t("td",{class:"px-4 py-3",innerHTML:e.handleFeesChange((y=a.categories)==null?void 0:y.fee)?e.handleFeesChange((f=a.categories)==null?void 0:f.fee):"No Fees"},null,8,te),t("td",se,[c(e.Badge,{color:e.status(a.status).color},{default:n(()=>[F(m(e.status(a.status).status),1)]),_:2},1032,["color"])]),t("td",ae,[c(e.Link,{class:"flex items-center px-4",href:v.route("admin.stalls.edit",a.id),tabindex:"-1"},{default:n(()=>[c(e.Icon,{name:"cheveron-right",class:"block w-6 h-6 fill-primary"})]),_:2},1032,["href"])])])}),128)),((x=i.stalls)==null?void 0:x.total)===0?(p(),_("tr",re,s[7]||(s[7]=[t("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)]))):D("",!0)]}),_:1},8,["data"])]),t("div",oe,[c(e.Pagination,{links:(b=i.stalls)==null?void 0:b.links},null,8,["links"])])]}),_:1,__:[8]})}const he=Q(R,[["render",le],["__file","Index.vue"]]);export{he as default};
