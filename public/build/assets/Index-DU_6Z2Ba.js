import{b as E,d as O}from"./helper-Jpd2WSUx.js";import{c as w,o as l,w as i,a,t as n,e as h,b as p,k as U,v as C,n as T,f as V,d as y,F as G,r as Q,g as N,h as P,x as L,i as z,Q as j,S as R}from"./app-BkL1CNwx.js";import{l as S,p as M}from"./pickBy-DBz4G69m.js";import{A as q}from"./AppLayout-BPPdX9d-.js";import{B as H}from"./BaseTable-COYnGHVO.js";import{P as J}from"./Pagination-DySzg0s6.js";import{S as K}from"./SearchFilter-BYGHE1w8.js";import{B as W}from"./Badge-km_yutmJ.js";import{I as X}from"./Icons-DwfuqtxP.js";import{F as Y}from"./FlashMessage-BQau8JjT.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-DeUXyAzp.js";import"./Footer-DHOCUsg6.js";const $={__name:"Index",props:{users:Object,filters:Object},setup(c,{expose:s}){var o,d;s();const f=N(null),e=["Name","Email","Mobile","Address","Birthday","Gender","Status","Actions"],r=c,m=P({search:(o=r==null?void 0:r.filters)==null?void 0:o.search,category:(d=r==null?void 0:r.filters)==null?void 0:d.category}),g=L({_method:"PUT",first_name:"",middle_name:"",last_name:"",email:"",birthday:"",address:"",photo:""});z(m,S.throttle(()=>{var t;j.get(`/admin/users?role=${(t=r==null?void 0:r.filters)==null?void 0:t.role}`,M(m),{preserveState:!0})},150),{deep:!0});function b(){var B,x;let t;switch((x=(B=r==null?void 0:r.filters)==null?void 0:B.role)==null?void 0:x.toLowerCase()){case"sub-admin":t="Admins";break;case"inspector":t="Inspectors";break;default:t="Vendors";break}return t}const _=()=>{f.value=!0},k=()=>{g.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>clearPhotoFileInput()})};function v(){console.log(m),Object.assign(m,S.mapValues(m,()=>null))}const u={verificationLinkSent:f,headers:e,props:r,form:m,forms:g,getPageName:b,sendEmailVerification:_,updateProfileInformation:k,reset:v,get checkDateStatus(){return O},get formatDate(){return E},watch:z,reactive:P,ref:N,get Link(){return R},get router(){return j},get useForm(){return L},get throttle(){return S.throttle},get mapValues(){return S.mapValues},get pickBy(){return M},AppLayout:q,BaseTable:H,Pagination:J,SearchFilter:K,Badge:W,Icon:X,FlashMessage:Y};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},ee={class:"mb-8 text-3xl font-bold text-primary"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"flex items-center justify-between mb-6"},se={class:"px-4 py-3 capitalize"},re={class:"px-4 py-3"},oe={class:"px-4 py-3 capitalize"},le={class:"px-4 py-3 capitalize"},ie={class:"px-4 py-3 capitalize"},ne={class:"px-4 py-3 capitalize"},de={class:"px-4 py-3 capitalize"},ce={key:0,class:"px-4 py-3 capitalize"},me={key:1,class:"w-px border-t"},pe={key:0},fe={class:"mt-6 flex justify-center"};function he(c,s,f,e,r,m){return l(),w(e.AppLayout,{title:"Users"},{header:i(()=>[...s[2]||(s[2]=[a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Users ",-1)])]),default:i(()=>{var g,b,_,k,v,u;return[a("h1",ee,n(e.getPageName()),1),a("div",te,[c.$page.props.flash.success?(l(),w(e.FlashMessage,{key:0,message:c.$page.props.flash.success,type:"success"},null,8,["message"])):h("",!0),c.$page.props.flash.error?(l(),w(e.FlashMessage,{key:1,message:c.$page.props.flash.error,type:"error"},null,8,["message"])):h("",!0),a("div",ae,[p(e.SearchFilter,{modelValue:e.form.search,"onUpdate:modelValue":s[1]||(s[1]=o=>e.form.search=o),class:"mr-4 w-full max-w-md",onReset:e.reset},{default:i(()=>[s[4]||(s[4]=a("label",{class:"block text-gray-700"},"Gender:",-1)),U(a("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.form.gender=o),class:"form-select mt-1 w-full"},[...s[3]||(s[3]=[a("option",{value:null},"All",-1),a("option",{value:1},"Female",-1),a("option",{value:2},"Male",-1),a("option",{value:3},"Other",-1)])],512),[[C,e.form.gender]])]),_:1},8,["modelValue"]),((b=(g=e.props)==null?void 0:g.filters)==null?void 0:b.role)!=="vendor"?(l(),w(e.Link,{key:0,type:"submit",class:T([{"opacity-25":e.form.processing},"bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"]),disabled:e.form.processing,href:`/admin/users/create?role=${(k=(_=e.props)==null?void 0:_.filters)==null?void 0:k.role}`},{default:i(()=>{var o,d;return[V(n(((d=(o=e.props)==null?void 0:o.filters)==null?void 0:d.role)==="inspector"?"Add Inspector":"Add Admin"),1)]}),_:1},8,["class","disabled","href"])):h("",!0)]),p(e.BaseTable,{headers:e.headers,data:(v=f.users)==null?void 0:v.data},{header:i(()=>[...s[5]||(s[5]=[a("th",{class:"px-4 py-3 text-left"},"Name",-1),a("th",{class:"px-4 py-3 text-left"},"Email",-1),a("th",{class:"px-4 py-3 text-left"},"Mobile",-1),a("th",{class:"px-4 py-3 text-left"},"Address",-1),a("th",{class:"px-4 py-3 text-left"},"Birthday",-1),a("th",{class:"px-4 py-3 text-left"},"Gender",-1),a("th",{class:"px-4 py-3 text-left"},"Status",-1)])]),row:i(({data:o})=>{var d;return[(l(!0),y(G,null,Q(o,(t,B)=>{var x,A,D,F,I;return l(),y("tr",{key:t.id,class:"hover:bg-gray-50"},[a("td",se,n(t.name),1),a("td",re,n(t.email),1),a("td",oe,n(t.mobile),1),a("td",le,n(t.address),1),a("td",ie,n(e.formatDate(t.birthDay)),1),a("td",ne,n((x=t==null?void 0:t.genders)==null?void 0:x.name),1),a("td",de,[p(e.Badge,{color:t!=null&&t.status?"green":"red"},{default:i(()=>[V(n(t!=null&&t.status?"Active":"Not Active"),1)]),_:2},1032,["color"])]),e.checkDateStatus(new Date(t==null?void 0:t.joinDate))?(l(),y("td",ce,[p(e.Link,{method:"post",as:"button",href:c.route("verification.send",t.id),class:"w-full bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"},{default:i(()=>[...s[6]||(s[6]=[V(" Resend Verification Email ",-1)])]),_:1},8,["href"])])):h("",!0),((D=(A=e.props)==null?void 0:A.filters)==null?void 0:D.role)!=="user"?(l(),y("td",me,[p(e.Link,{class:"flex items-center px-4",href:`/admin/users/update/${t.id}/edit?role=${(I=(F=e.props)==null?void 0:F.filters)==null?void 0:I.role}`,tabindex:"-1"},{default:i(()=>[p(e.Icon,{name:"cheveron-right",class:"block w-6 h-6 fill-primary"})]),_:1},8,["href"])])):h("",!0)])}),128)),((d=f.users)==null?void 0:d.total)===0?(l(),y("tr",pe,[...s[7]||(s[7]=[a("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):h("",!0)]}),_:1},8,["data"])]),a("div",fe,[p(e.Pagination,{links:(u=f.users)==null?void 0:u.links},null,8,["links"])])]}),_:1})}const De=Z($,[["render",he],["__file","Index.vue"]]);export{De as default};
