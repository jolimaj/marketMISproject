import{a as T,c as G}from"./helper-BoB9zCoy.js";import{d as h,e as u,o as c,t as n,n as E,g as B,G as z,i as A,z as M,c as w,w as p,a as s,b as f,k as Q,v as R,f as I,F as q,r as H,h as L,x as j,Q as U,S as J}from"./app-uXddmEpz.js";import{l as S,p as C}from"./pickBy-Cz0_Eu6Y.js";import{A as K}from"./AppLayout-Br8Pf_X-.js";import{B as W}from"./BaseTable-BlSLnjYp.js";import{P as X}from"./Pagination-CeXYWUig.js";import{S as Y}from"./SearchFilter-mzsd348G.js";import{B as Z}from"./Badge-DyQTjnI6.js";import{I as $}from"./Icons-C3pYYq2K.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-C5gnPx-H.js";import"./Footer-Xx_KaGDa.js";const ee={__name:"FlashMessage",props:{message:String,type:{type:String,default:"success"},duration:{type:Number,default:3e3}},setup(d,{expose:a}){a();const o=d,e=B(!0),r=z(()=>o.type==="success"?"bg-green-500":"bg-red-500");A(()=>o.message,()=>{o.message&&(e.value=!0,setTimeout(()=>{e.value=!1},o.duration))}),M(()=>{setTimeout(()=>{e.value=!1},o.duration)});const l={props:o,visible:e,typeClass:r,ref:B,watch:A,onMounted:M,computed:z};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function te(d,a,o,e,r,l){return e.visible?(c(),h("div",{key:0,class:E(["fixed top-5 right-5 z-50 px-4 py-2 rounded shadow-lg text-white",e.typeClass]),transition:""},n(o.message),3)):u("",!0)}const se=O(ee,[["render",te],["__file","FlashMessage.vue"]]),ae={__name:"Index",props:{users:Object,filters:Object},setup(d,{expose:a}){var i,m;a();const o=B(null),e=["ID","Name","Email","Mobile","Address","Birthday","Gender","Status","Actions"],r=d,l=L({search:(i=r==null?void 0:r.filters)==null?void 0:i.search,category:(m=r==null?void 0:r.filters)==null?void 0:m.category}),g=j({_method:"PUT",first_name:"",middle_name:"",last_name:"",email:"",birthday:"",address:"",photo:""});A(l,S.throttle(()=>{var t;U.get(`/admin/users?role=${(t=r==null?void 0:r.filters)==null?void 0:t.role}`,C(l),{preserveState:!0})},150),{deep:!0});function _(){var D,y;let t;switch((y=(D=r==null?void 0:r.filters)==null?void 0:D.role)==null?void 0:y.toLowerCase()){case"sub-admin":t="Department Admins";break;case"inspector":t="Inspectors";break;default:t="All Users";break}return t}const b=()=>{o.value=!0},v=()=>{g.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>clearPhotoFileInput()})};function k(){console.log(l),Object.assign(l,S.mapValues(l,()=>null))}const x={verificationLinkSent:o,headers:e,props:r,form:l,forms:g,getPageName:_,sendEmailVerification:b,updateProfileInformation:v,reset:k,get checkDateStatus(){return G},get formatDate(){return T},watch:A,reactive:L,ref:B,get Link(){return J},get router(){return U},get useForm(){return j},get throttle(){return S.throttle},get mapValues(){return S.mapValues},get pickBy(){return C},AppLayout:K,BaseTable:W,Pagination:X,SearchFilter:Y,Badge:Z,Icon:$,FlashMessage:se};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},re={class:"mb-8 text-3xl font-bold text-primary"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"flex items-center justify-between mb-6"},ie={class:"px-4 py-3"},ne={class:"px-4 py-3 capitalize"},de={class:"px-4 py-3"},ce={class:"px-4 py-3 capitalize"},pe={class:"px-4 py-3 capitalize"},me={class:"px-4 py-3 capitalize"},fe={class:"px-4 py-3 capitalize"},ue={class:"px-4 py-3 capitalize"},he={key:0,class:"px-4 py-3 capitalize"},ge={key:1,class:"w-px border-t"},xe={key:0},ye={class:"mt-6 flex justify-center"};function _e(d,a,o,e,r,l){return c(),w(e.AppLayout,{title:"Users"},{header:p(()=>a[2]||(a[2]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Users ",-1)])),default:p(()=>{var g,_,b,v,k,x;return[s("h1",re,n(e.getPageName()),1),s("div",oe,[d.$page.props.flash.success?(c(),w(e.FlashMessage,{key:0,message:d.$page.props.flash.success,type:"success"},null,8,["message"])):u("",!0),d.$page.props.flash.error?(c(),w(e.FlashMessage,{key:1,message:d.$page.props.flash.error,type:"error"},null,8,["message"])):u("",!0),s("div",le,[f(e.SearchFilter,{modelValue:e.form.search,"onUpdate:modelValue":a[1]||(a[1]=i=>e.form.search=i),class:"mr-4 w-full max-w-md",onReset:e.reset},{default:p(()=>[a[4]||(a[4]=s("label",{class:"block text-gray-700"},"Gender:",-1)),Q(s("select",{"onUpdate:modelValue":a[0]||(a[0]=i=>e.form.gender=i),class:"form-select mt-1 w-full"},a[3]||(a[3]=[s("option",{value:null},"All",-1),s("option",{value:1},"Female",-1),s("option",{value:2},"Male",-1),s("option",{value:3},"Other",-1)]),512),[[R,e.form.gender]])]),_:1,__:[4]},8,["modelValue"]),((_=(g=e.props)==null?void 0:g.filters)==null?void 0:_.role)!=="user"?(c(),w(e.Link,{key:0,type:"submit",class:E([{"opacity-25":e.form.processing},"bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"]),disabled:e.form.processing,href:`/admin/users/create?role=${(v=(b=e.props)==null?void 0:b.filters)==null?void 0:v.role}`},{default:p(()=>{var i,m;return[I(n(((m=(i=e.props)==null?void 0:i.filters)==null?void 0:m.role)==="inspector"?"Add Inspector":"Add Admin"),1)]}),_:1},8,["class","disabled","href"])):u("",!0)]),f(e.BaseTable,{headers:e.headers,data:(k=o.users)==null?void 0:k.data},{header:p(()=>a[5]||(a[5]=[s("th",{class:"px-4 py-3 text-left"},"User ID",-1),s("th",{class:"px-4 py-3 text-left"},"Name",-1),s("th",{class:"px-4 py-3 text-left"},"Email",-1),s("th",{class:"px-4 py-3 text-left"},"Mobile",-1),s("th",{class:"px-4 py-3 text-left"},"Address",-1),s("th",{class:"px-4 py-3 text-left"},"Birthday",-1),s("th",{class:"px-4 py-3 text-left"},"Gender",-1),s("th",{class:"px-4 py-3 text-left"},"Status",-1)])),row:p(({data:i})=>{var m;return[(c(!0),h(q,null,H(i,(t,D)=>{var y,V,F,N,P;return c(),h("tr",{key:t.id,class:"hover:bg-gray-50"},[s("td",ie,n(t.id),1),s("td",ne,n(t.name),1),s("td",de,n(t.email),1),s("td",ce,n(t.mobile),1),s("td",pe,n(t.address),1),s("td",me,n(e.formatDate(t.birthDay)),1),s("td",fe,n((y=t==null?void 0:t.genders)==null?void 0:y.name),1),s("td",ue,[f(e.Badge,{color:t!=null&&t.status?"green":"red"},{default:p(()=>[I(n(t!=null&&t.status?"Active":"Not Active"),1)]),_:2},1032,["color"])]),e.checkDateStatus(new Date(t==null?void 0:t.joinDate))?(c(),h("td",he,[f(e.Link,{method:"post",as:"button",href:d.route("verification.send",t.id),class:"w-full bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"},{default:p(()=>a[6]||(a[6]=[I(" Resend Verification Email ")])),_:2,__:[6]},1032,["href"])])):u("",!0),((F=(V=e.props)==null?void 0:V.filters)==null?void 0:F.role)!=="user"?(c(),h("td",ge,[f(e.Link,{class:"flex items-center px-4",href:`/admin/users/update/${t.id}/edit?role=${(P=(N=e.props)==null?void 0:N.filters)==null?void 0:P.role}`,tabindex:"-1"},{default:p(()=>[f(e.Icon,{name:"cheveron-right",class:"block w-6 h-6 fill-primary"})]),_:2},1032,["href"])])):u("",!0)])}),128)),((m=o.users)==null?void 0:m.total)===0?(c(),h("tr",xe,a[7]||(a[7]=[s("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)]))):u("",!0)]}),_:1},8,["data"])]),s("div",ye,[f(e.Pagination,{links:(x=o.users)==null?void 0:x.links},null,8,["links"])])]}),_:1})}const Pe=O(ae,[["render",_e],["__file","Index.vue"]]);export{Pe as default};
