import{c as q,o as V,w as i,a as s,b as a,f as L,t as F,p as D,d as U,F as W,r as H,m as R,q as G,H as A,g as B,u as J,i as M,l as K}from"./app-BanCskK_.js";import{i as P,c as Q}from"./helper-ugt-wfEi.js";import{A as X}from"./AppLayout-C4XkhOEP.js";import{T as Y}from"./TextInput-Ds5jS_tB.js";import{L as Z}from"./LoadingButton-DfFYCWyC.js";import{I as $}from"./InputLabel-DEGwxhMC.js";import{I as ee}from"./InputError-BURk-VOo.js";import{S as te}from"./SelectInput-DO5yod0Y.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-BNihBzbJ.js";import"./Icons-DEAzJamH.js";import"./Footer-qu4Jt-lS.js";import"./v4-C6aID195.js";const oe={__name:"Form",props:{stallsCategories:Object,stall:Object,feeMasterlist:Object},setup(k,{expose:o}){var b,w,h,x,y,v,I,r,p,E,C,O;o();const S=A(),e=B(null),t=k,n=()=>P(S.url),l=J({name:n()?(b=t==null?void 0:t.stall)==null?void 0:b.name:"",coordinates:"",lat:n()&&((w=t==null?void 0:t.stall)!=null&&w.coordinates)?JSON.parse((h=t==null?void 0:t.stall)==null?void 0:h.coordinates)[0]:"",long:n()&&((x=t==null?void 0:t.stall)!=null&&x.coordinates)?JSON.parse((y=t==null?void 0:t.stall)==null?void 0:y.coordinates)[1]:"",length:n()?(I=JSON.parse((v=t==null?void 0:t.stall)==null?void 0:v.size))==null?void 0:I.length:"",width:n()?(p=JSON.parse((r=t==null?void 0:t.stall)==null?void 0:r.size))==null?void 0:p.width:"",size:"",stall_category_id:n()?(E=t==null?void 0:t.stall)==null?void 0:E.stall_category_id:"",is_transient:n()?(C=t==null?void 0:t.stall)==null?void 0:C.is_transient:!1,location_description:n()?(O=t==null?void 0:t.stall)==null?void 0:O.location_description:""}),m=()=>{l.size=JSON.stringify({length:Number(l.length),width:Number(l.width)})},c=()=>{l.coordinates=JSON.stringify([Number(l.lat),Number(l.long)])},f=()=>{var z;const d=(z=t==null?void 0:t.stallsCategories)==null?void 0:z.find(j=>j.id==l.stall_category_id),T=(d==null?void 0:d.is_table_rental)||(d==null?void 0:d.is_transient);return T&&(l.length="",l.width="",l.long="",l.lat="",l.size="",l.coordinates=""),T};M(()=>[l.length,l.width,l.long,l.lat,l.stall_category_id],()=>{m(),c(),f()});const u=()=>{delete l.width,delete l.length,delete l.long,delete l.lat,l.post(route("admin.stalls.store"))},g=()=>{var d;delete l.width,delete l.length,delete l.long,delete l.lat,l.put(route("admin.stalls.update",(d=t==null?void 0:t.stall)==null?void 0:d.id))},_={page:S,selectedCategory:e,props:t,checkIfEdit:n,form:l,getAreaOfSqrMeter:m,getMapCoordinates:c,categoryNotStall:f,submit:u,update:g,stores:()=>n()?g():u(),watch:M,ref:B,get Link(){return K},get usePage(){return A},get useForm(){return J},get formatAmount(){return Q},get isEditPage(){return P},AppLayout:X,TextInput:Y,LoadingButton:Z,InputLabel:$,InputError:ee,SelectInput:te};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},ae={class:"mb-8 text-3xl font-bold"},re={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},se={class:"max-w-3xl bg-white rounded-md shadow overflow-hidden"},ne={class:"flex flex-col md:flex-row gap-4 p-5"},de={class:"w-full md:w-1/2"},ie={class:"w-full md:w-1/2"},me=["value"],ce={class:"flex flex-col md:flex-row gap-4 px-5"},fe={class:"w-full md:w-1/2"},ue={class:"w-full md:w-1/2"},ge={class:"flex flex-col md:flex-row gap-4 p-5"},_e={class:"w-full md:w-1/2"},be={class:"w-full md:w-1/2"},we={class:"flex flex-col gap-4 p-5"},he={class:"w-full"},xe={class:"flex items-center px-8 py-4 bg-gray-50 border-t border-gray-100"};function ye(k,o,S,e,t,n){return V(),q(e.AppLayout,{title:"Stalls"},{header:i(()=>[...o[7]||(o[7]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stalls ",-1)])]),default:i(()=>{var l,m,c,f,u,g,N,_,b,w,h,x,y,v,I;return[s("h1",ae,[a(e.Link,{class:"text-primary hover:text-secondary",href:"/admin/system-setting/rental-space"},{default:i(()=>[...o[8]||(o[8]=[L("Rental Space",-1)])]),_:1}),o[9]||(o[9]=s("span",{class:"text-secondary font-medium"},"/",-1)),L(" "+F(e.checkIfEdit()?`${(l=e.props)==null?void 0:l.stall.name}`:"Create New"),1)]),s("div",re,[s("div",se,[s("form",{onSubmit:D(e.stores,["prevent"])},[s("div",ne,[s("div",de,[a(e.InputLabel,{for:"Name",value:"Name"}),a(e.TextInput,{id:"Name",modelValue:e.form.name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.name=r),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),a(e.InputError,{class:"mt-2",message:(c=(m=e.form)==null?void 0:m.errors)==null?void 0:c.name},null,8,["message"])]),s("div",ie,[a(e.InputLabel,{for:"stall_category_id",value:"Category",class:"mb-1 block w-full"}),a(e.SelectInput,{modelValue:e.form.stall_category_id,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.stall_category_id=r),id:"stall_category_id",required:"",autocomplete:"stall_category_id"},{default:i(()=>[(V(!0),U(W,null,H(S.stallsCategories,r=>(V(),U("option",{key:r.id,value:r.id},F(r.name),9,me))),128))]),_:1},8,["modelValue"]),a(e.InputError,{class:"mt-2",message:(u=(f=e.form)==null?void 0:f.errors)==null?void 0:u.stall_category_id},null,8,["message"])])]),s("div",ce,[s("div",fe,[a(e.InputLabel,{for:"width",value:"Size - Length"}),a(e.TextInput,{id:"length",modelValue:e.form.length,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.length=r),type:"number",class:"mt-1 block w-full",placeholder:"Length",autofocus:"",disabled:!e.form.stall_category_id||e.categoryNotStall(),autocomplete:"length"},null,8,["modelValue","disabled"]),a(e.InputError,{class:"mt-2",message:(N=(g=e.form)==null?void 0:g.errors)==null?void 0:N.length},null,8,["message"])]),s("div",ue,[a(e.InputLabel,{for:"width",value:"Size - Width"}),a(e.TextInput,{id:"width",modelValue:e.form.width,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.width=r),type:"number",class:"mt-1 block w-full",placeholder:"Width",autofocus:"",disabled:!e.form.stall_category_id||e.categoryNotStall(),autocomplete:"width"},null,8,["modelValue","disabled"]),a(e.InputError,{class:"mt-2",message:(b=(_=e.form)==null?void 0:_.errors)==null?void 0:b.width},null,8,["message"])])]),s("div",ge,[s("div",_e,[a(e.InputLabel,{for:"width",value:"Coordinates - Longitude"}),a(e.TextInput,{id:"long",modelValue:e.form.long,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.long=r),type:"number",class:"mt-1 block w-full",placeholder:"Longitude",autofocus:"",disabled:!e.form.stall_category_id||e.categoryNotStall(),autocomplete:"long"},null,8,["modelValue","disabled"]),a(e.InputError,{class:"mt-2",message:(h=(w=e.form)==null?void 0:w.errors)==null?void 0:h.long},null,8,["message"])]),s("div",be,[a(e.InputLabel,{for:"length",value:"Coordinates - Latitude"}),a(e.TextInput,{id:"la",modelValue:e.form.lat,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.lat=r),type:"number",class:"mt-1 block w-full",placeholder:"Latitude",autofocus:"",disabled:!e.form.stall_category_id||e.categoryNotStall(),autocomplete:"lat"},null,8,["modelValue","disabled"]),a(e.InputError,{class:"mt-2",message:(y=(x=e.form)==null?void 0:x.errors)==null?void 0:y.lat},null,8,["message"])])]),s("div",we,[s("div",he,[a(e.InputLabel,{for:"location_description",value:"Location Description"}),R(s("textarea",{id:"remarks","onUpdate:modelValue":o[6]||(o[6]=r=>e.form.location_description=r),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm resize-none"},null,512),[[G,e.form.location_description]]),a(e.InputError,{class:"mt-2",message:(I=(v=e.form)==null?void 0:v.errors)==null?void 0:I.location_description},null,8,["message"])])]),s("div",xe,[a(e.Link,{href:"/admin/system-setting/rental-space",class:"text-red-600 hover:underline",tabindex:"-1"},{default:i(()=>[...o[10]||(o[10]=[L("Cancel",-1)])]),_:1}),a(e.LoadingButton,{loading:e.form.processing,class:"bg-primary ml-auto",type:"submit"},{default:i(()=>[...o[11]||(o[11]=[L("Save",-1)])]),_:1},8,["loading"])])],32)])])]}),_:1})}const Fe=le(oe,[["render",ye],["__file","Form.vue"]]);export{Fe as default};
