import{c as _e,o as b,w as R,a as t,b as c,f as h,t as m,d as x,e as S,n as I,p as we,F as ke,r as Se,H as qe,g as q,u as ye,L as Re,i as Ie,B as Ce,j as se,l as Fe}from"./app-BanCskK_.js";import{S as Ee,C as je,P as Ne,M as Be,D as Ae,d as ge}from"./SingleImageUpload-DfUnUCyJ.js";import{m as Me,h as pe,i as Pe,j as he,f as xe,a as Ve,c as De}from"./helper-ugt-wfEi.js";import{s as Le}from"./scopeData-BsU-C9AZ.js";import{A as Ue}from"./AppLayout-C4XkhOEP.js";import{T as ze}from"./TextInput-Ds5jS_tB.js";import{L as Oe}from"./LoadingButton-DfFYCWyC.js";import{I as Ge}from"./InputLabel-DEGwxhMC.js";import{I as Je}from"./InputError-BURk-VOo.js";import{M as He}from"./MultiSelect-BtQVSqj6.js";import{C as Xe}from"./ConfirmationModal-BnX2MBGg.js";import{S as Qe}from"./SecondaryButton-D4pPHRxf.js";import{_ as Ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-BNihBzbJ.js";import"./Icons-DEAzJamH.js";import"./Footer-qu4Jt-lS.js";import"./Modal-D_qkctnO.js";const We={__name:"Form",props:{stallTypes:Object,stallTypesAll:Object,stallRental:Object,requirements:Object,paymentDetails:Object,fees:Object,auth:Object,total_payments:Object},setup(C,{expose:a}){var U,z,O,G,J,H,X,Q,K,W,Y,Z;a();const v=qe(),e=q([]),be=q([]),_=q(1),w=q(null),N=q({}),P=q(null),T=q(!1),F=q([]),g=q(!1),D=q(null),l=C,p=()=>Pe(v.url),y=()=>(console.log("isReuploadPage(page.url)",he(v.url)),he(v.url)),f=()=>(console.log("checkIfRenewal(page.url)",pe(v.url)),pe(v.url)),re=()=>{var n;return y()||f()||p()?(n=l==null?void 0:l.stallRental)==null?void 0:n.name:"Create New"},s=ye({type:f()?2:1,business_name:f()||p()||y()?(U=l==null?void 0:l.stallRental)==null?void 0:U.name:"",stall_id:f()||p()||y()?(O=(z=l==null?void 0:l.stallRental)==null?void 0:z.stalls)==null?void 0:O.id:"",requirements:[],acknowledgeContract:f()||p()||y()?(G=l==null?void 0:l.stallRental)==null?void 0:G.acknowledgeContract:"",reference_number:f()||p()||y()?(H=(J=l==null?void 0:l.stallRental)==null?void 0:J.paymentRecord)==null?void 0:H.reference_number:"",attachment_signature:[],total_payment:f()||p()||y()?(Q=(X=l==null?void 0:l.stallRental)==null?void 0:X.paymentRecord)==null?void 0:Q.total_payments:0,fees:f()||p()||y()?Array.isArray((K=l==null?void 0:l.stallRental)==null?void 0:K.fees_additional)?(W=l==null?void 0:l.stallRental)==null?void 0:W.fees_additional.map(Number):[]:[],step:_.value,bulb:f()||p()||y()?(Y=l==null?void 0:l.stallRental)==null?void 0:Y.bulb:null,stall_rental_id:f()||p()||y()?(Z=l==null?void 0:l.stallRental)==null?void 0:Z.id:null}),ne=ye({requirements:[]}),oe={lesseeName:{page:0,x:160,y:530},lesseeNamePage2:{page:2,x:110,y:370},barangay:{page:0,x:320,y:520},stallNo:{page:0,x:300,y:440},day:{page:2,x:120,y:300},month:{page:2,x:500,y:310},signature:{page:2,x:450,y:200,w:100,h:50}},ie=Re(()=>{var i,u;return((u=(i=l.auth)==null?void 0:i.user)==null?void 0:u.first_name.split(" ")).map(r=>r[0]).join("")}),de=()=>{var n,i,u;M(s.fees)&&s.bulb<0&&(s.errors.bulb="Please input number of bulbs."),s.requirements=p()?(n=l==null?void 0:l.stallRental)==null?void 0:n.requirements.map(r=>({requirement_checklist_id:r.checklist_id,attachment:r.attachment})):e.value.map(r=>({requirement_checklist_id:r.documentType,attachment:r.file})),s.attachment_signature=P.value,s.total_payment=(i=l==null?void 0:l.total_payments)==null?void 0:i.total,s.acknowledgeContract=!0,s.fees_additional=s.fees,g.value=!0,(u=D.value)==null||u.fillContract(),g.value&&s.post(route("applications.stalls.store"),{preserveScroll:!0,onSuccess:async()=>{g.value=!1,se.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{console.error("Form errors:",r)}})},ue=async()=>{var i,u;if(e.value.some(r=>r.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const n=new FormData;n.append("_method","PUT"),n.append("stall_id",s.stall_id||""),n.append("business_name",s.business_name||""),n.append("type",2),n.append("bulb",s.bulb||""),n.append("total_payment",s.total_payment||""),n.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((r,d)=>{n.append(`requirements[${d}][requirement_checklist_id]`,r.documentType),r.file instanceof File&&n.append(`requirements[${d}][attachment]`,r.file)}),s.attachment_signature instanceof File&&n.append("attachment_signature",s.attachment_signature),g.value=!0,(i=D.value)==null||i.fillContract(),ge.Inertia.post(route("applications.stalls.update",(u=l==null?void 0:l.stallRental)==null?void 0:u.id),n,{preserveScroll:!0,onStart:()=>{g.value=!0},onSuccess:()=>{se.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{g.value=!1,console.error("Form errors:",r)}})},B=()=>{var n,i,u;if(y()){if(e.value.some(d=>d.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const r=new FormData;r.append("_method","PUT"),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",s.type||""),r.append("bulb",s.bulb||""),r.append("total_payment",s.total_payment||""),r.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((d,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,d.documentType),d.file instanceof File&&r.append(`requirements[${k}][attachment]`,d.file)}),s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),ge.Inertia.post(route("applications.stalls.update",(n=l==null?void 0:l.stallRental)==null?void 0:n.id),r,{preserveScroll:!0,onStart:()=>{g.value=!0},onSuccess:()=>{g.value=!1,se.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:d=>{g.value=!1,console.error("Form errors:",d)}})}else{const r=new FormData;if(r.append("_method","PUT"),M(s.fees)&&s.bulb<0&&(s.errors.bulb="Please input number of bulbs."),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",s.type||""),r.append("bulb",s.bulb||0),r.append("total_payment",((i=l==null?void 0:l.total_payments)==null?void 0:i.total)||0),r.append("acknowledgeContract",s.acknowledgeContract?1:0),f()){if(r.append("type",2),e.value.some(d=>d.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}e.value.forEach((d,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,d.documentType),d.file instanceof File&&r.append(`requirements[${k}][attachment]`,d.file)})}s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),ge.Inertia.post(route("applications.stalls.update",(u=l==null?void 0:l.stallRental)==null?void 0:u.id),r,{preserveScroll:!0,onStart:()=>{g.value=!0},onSuccess:()=>{var d;g.value=!1,(d=D.value)==null||d.fillContract(),se.visit(route("applications.stalls.index"),{preserveScroll:!0,preserveState:!1})},onError:d=>{g.value=!1,console.error("Form errors:",d)}})}},me=()=>{p()||y()?B():A()},ce=n=>`${De(n.amount)} per sqr mtr`,A=()=>{var n,i,u,r,d,k,$,ee,te;if(M(s.fees)&&(s==null?void 0:s.bulb)<0){s.errors.bulb="Please input number of bulbs.";return}if(console.log("step",M(s.fees)&&s.bulb<0),console.log(_.value,pe()),_.value===1)f()?s.put(route("applications.stalls.renew",(n=l==null?void 0:l.stallRental)==null?void 0:n.id),{onSuccess:()=>{_.value++}}):s.post(route("applications.stalls.store"),{preserveState:!0,onSuccess:()=>{_.value++}});else if(_.value===2){const le=((u=(i=l==null?void 0:l.requirements)==null?void 0:i.stall_new)==null?void 0:u.length)||0,E=e.value.filter(j=>j.status==="uploaded").length,ae=e.value.some(j=>j.status==="uploading");console.log("Required:",le,"Uploaded:",E,"Uploading:",ae),ae?s.errors.requirements="Please wait until all files are uploaded.":E<le?s.errors.requirements="Please upload all required documents.":E===0?s.errors.requirements="The requirements are required.":(s.errors.requirements=null,_.value++)}else _.value===3?(be.value=P.value,_.value++):_.value===4&&(s.step=_.value,console.log("checkIfRenewal",f()),N.value={lesseeName:xe((r=l==null?void 0:l.auth)==null?void 0:r.user),lesseeNamePage2:xe((d=l==null?void 0:l.auth)==null?void 0:d.user),barangay:($=(k=l==null?void 0:l.auth)==null?void 0:k.user)==null?void 0:$.address,stallNo:(ee=w==null?void 0:w.value)!=null&&ee.name?(te=w==null?void 0:w.value)==null?void 0:te.name:"",signature:P.value,day:new Date().getDate(),month:new Date().getMonth()+1},T.value=!0)},V=n=>{var u;console.log("Selected Stall:",n);const i=l.stallTypesAll.filter(r=>r.name===(n==null?void 0:n.Stall)||r.name===(n==null?void 0:n.name));console.log("val=",i),w.value=i[0],s.stall_id=(u=i[0])==null?void 0:u.id},fe=()=>{T.value=!1},M=n=>{const i=n.find(u=>u===3);return console.log((i==null?void 0:i.length)>0,i),!i};F.value=l.stallsData||[],Ie(()=>l.stallTypes,n=>{F.value=Me(n)||[]},{deep:!0,immediate:!0}),Ce(()=>{var n;(p()||f())&&V((n=l==null?void 0:l.stallRental)==null?void 0:n.stalls)});const L={page:v,localFileReq:e,localFileSignature:be,step:_,selectedStall:w,contractData:N,signature:P,isSubmit:T,stallData:F,isGenerating:g,contractRef:D,props:l,checkIfEdit:p,checkIfReupload:y,checkIfRenewal:f,titlePage:re,form:s,reuploadForm:ne,fieldMap:oe,initials:ie,submit:de,renewals:ue,update:B,submitRequest:me,feeDetails:ce,nextButton:A,onStallSelect:V,closeSubmit:fe,handleBulb:M,ref:q,watch:Ie,computed:Re,onMounted:Ce,get Link(){return Fe},get usePage(){return qe},get useForm(){return ye},get router(){return se},get Inertia(){return ge.Inertia},get formatAmount(){return De},get formatDateShort(){return Ve},get fullName(){return xe},get isEditPage(){return Pe},get isRenewalPage(){return pe},get isReuploadPage(){return he},get mapTablesToGeoJSON(){return Me},get scopeData(){return Le},AppLayout:Ue,TextInput:ze,LoadingButton:Oe,InputLabel:Ge,InputError:Je,DocumentUpload:Ae,Map:Be,PdfMonitor:Ne,Contract:je,SingleImageUpload:Ee,MultiSelect:He,ConfirmationModal:Xe,SecondaryButton:Qe};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},Ye={class:"mb-8 text-3xl font-bold"},Ze={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$e={class:"max-w-3xl bg-white rounded-md shadow overflow-hidden"},et={key:0,class:"flex items-center justify-between mt-6"},tt={class:"flex flex-col items-center text-center w-1/3"},lt={class:"flex flex-col items-center text-center w-1/3"},at={class:"flex flex-col items-center text-center w-1/3"},st={class:"flex flex-col items-center text-center w-1/3"},rt={key:0,class:"p-6 space-y-6"},nt={class:"flex flex-col md:flex-row gap-4 px-5"},ot={class:"w-full md:w-full"},it={class:"flex flex-col md:flex-row gap-4 px-5"},dt={class:"w-full md:w-full"},ut={class:"flex flex-col md:flex-row gap-4 px-5"},mt={class:"w-full md:w-full"},ct={class:"px-5"},ft={class:"w-full border p-4 rounded bg-gray-50"},gt={class:"relative w-full h-[400px] rounded overflow-hidden"},pt={key:0,class:"flex flex-col md:flex-row gap-4 px-5"},bt={class:"w-full md:w-full"},yt={class:"border p-4 rounded bg-gray-50"},ht={class:"ml-4 list-disc"},xt={key:1,class:"p-6 space-y-6"},vt={key:2},_t={key:0,class:"p-6 space-y-6"},wt={key:1,class:"p-6 space-y-6"},kt={class:"flex gap-6"},St={class:"flex flex-col items-center"},qt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},Rt={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},It={class:"flex-1"},Ct={class:"text-lg font-semibold text-primary"},Mt={class:"text-sm text-gray-600"},Pt=["href"],Dt={class:"text-sm text-gray-600"},Tt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},Ft={class:"text-gray-600"},Et={class:"text-gray-600"},jt={class:"text-gray-600"},Nt={class:"text-gray-600"},Bt={class:"text-gray-600"},At={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Vt={class:"space-y-2"},Lt={class:"flex items-center space-x-2"},Ut={class:"text-secondary"},zt={class:"text-gray-600"},Ot={class:"font-bold text-gray-600"},Gt={class:"text-green-600 font-semibold"},Jt={class:"flex items-center px-8 py-4 bg-gray-50 border-t border-gray-100"},Ht={class:"ml-auto flex gap-2"},Xt={key:0},Qt={class:"flex justify-end space-x-3 p-4"};function Kt(C,a,v,e,be,_){return b(),_e(e.AppLayout,{title:"Stall Types"},{header:R(()=>[...a[8]||(a[8]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stall Types ",-1)])]),default:R(()=>{var w,N,P,T,F,g,D,l,p,y,f,re,s,ne,oe,ie,de,ue,B,me,ce,A,V,fe,M,L,U,z,O,G,J,H,X,Q,K,W,Y,Z,n,i,u,r,d,k,$,ee,te,le,E,ae,j,ve;return[t("h1",Ye,[c(e.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/stall-leasing"},{default:R(()=>[...a[9]||(a[9]=[h("Stalls Leasing",-1)])]),_:1}),a[10]||(a[10]=t("span",{class:"text-secondary font-medium"},"/",-1)),h(" "+m(e.titlePage()),1)]),t("div",Ze,[t("div",$e,[!e.checkIfEdit()&&!e.checkIfReupload()?(b(),x("div",et,[t("div",tt,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===1?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...a[11]||(a[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A7.968 7.968 0 0112 15c1.933 0 3.683.69 5.121 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===1?"text-primary font-semibold":"text-gray-400"])},"Vendor Info",2)]),t("div",{class:I(["flex-1 border-t-2 mx-2",e.step>1?"border-primary":"border-gray-200"])},null,2),t("div",lt,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===2?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...a[12]||(a[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 11h10M7 15h6M5 5v14h14V5H5z"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===2?"text-primary font-semibold":"text-gray-400"])},"Requirements",2)]),t("div",{class:I(["flex-1 border-t-2 mx-2",e.step>2?"border-primary":"border-gray-200"])},null,2),t("div",at,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===3?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...a[13]||(a[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01M21 21l-6-6"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===3?"text-primary font-semibold":"text-gray-400"])},"Rental Agreement",2)]),t("div",st,[t("div",{class:I(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===4?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...a[14]||(a[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M4 6h16M4 12h16M4 18h16"})],-1)])],2),t("span",{class:I(["mt-2 text-sm",e.step===4?"text-primary font-semibold":"text-gray-400"])},"Finish Application",2)])])):S("",!0),t("form",{onSubmit:we(e.submitRequest,["prevent"])},[!e.checkIfReupload()&&(e.step===1||e.checkIfEdit())?(b(),x("div",rt,[t("div",nt,[t("div",ot,[c(e.InputLabel,{for:"Business Name",value:"Business Name"}),c(e.TextInput,{id:"business_name",modelValue:e.form.business_name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.form.business_name=o),type:"text",class:"mt-1 block w-full",required:"",disabled:e.checkIfRenewal(),autofocus:"",autocomplete:"business_name"},null,8,["modelValue","disabled"]),c(e.InputError,{class:"mt-2",message:(N=(w=e.form)==null?void 0:w.errors)==null?void 0:N.business_name},null,8,["message"])])]),t("div",it,[t("div",dt,[c(e.InputLabel,{for:"Add ons",value:"Add ons"}),c(e.MultiSelect,{modelValue:e.form.fees,"onUpdate:modelValue":a[1]||(a[1]=o=>e.form.fees=o),options:v.fees},null,8,["modelValue","options"]),c(e.InputError,{class:"mt-2",message:(T=(P=e.form)==null?void 0:P.errors)==null?void 0:T.fees},null,8,["message"])])]),t("div",ut,[t("div",mt,[c(e.InputLabel,{for:"Add ons",value:"Bulbs"}),c(e.TextInput,{id:"bulbs",modelValue:e.form.bulb,"onUpdate:modelValue":a[2]||(a[2]=o=>e.form.bulb=o),type:"number",disabled:e.handleBulb(e.form.fees),class:"mt-1 block w-full",autofocus:"",autocomplete:"bulbs"},null,8,["modelValue","disabled"]),c(e.InputError,{class:"mt-2",message:(g=(F=e.form)==null?void 0:F.errors)==null?void 0:g.bulb},null,8,["message"])])]),t("div",ct,[t("div",ft,[t("div",gt,[c(e.Map,{"stalls-data":e.mapTablesToGeoJSON(v.stallTypes),"scope-data":e.scopeData,center:[13.965601,121.527501],zoom:20,height:"500px",disabled:e.checkIfEdit()||e.checkIfRenewal(),onStallClick:e.onStallSelect},null,8,["stalls-data","scope-data","disabled"])]),c(e.InputError,{class:"mt-2",message:(l=(D=e.form)==null?void 0:D.errors)==null?void 0:l.stall_id},null,8,["message"])])]),e.selectedStall?(b(),x("div",pt,[t("div",bt,[t("div",yt,[a[19]||(a[19]=t("h2",{class:"text-lg font-bold mb-2 text-secondary"},"Transient Details",-1)),t("p",null,[a[15]||(a[15]=t("strong",null,"Name:",-1)),h(" "+m((p=e.selectedStall)==null?void 0:p.name),1)]),t("p",null,[a[16]||(a[16]=t("strong",null,"Size:",-1)),h(" "+m((y=e.selectedStall)!=null&&y.size?`${(f=e.selectedStall)==null?void 0:f.size.length}X${(re=e.selectedStall)==null?void 0:re.size.width}`:"-"),1)]),t("p",null,[a[17]||(a[17]=t("strong",null,"Category:",-1)),h(" "+m((ne=(s=e.selectedStall)==null?void 0:s.categories)==null?void 0:ne.name),1)]),t("p",null,[a[18]||(a[18]=t("strong",null,"Description:",-1)),h(" "+m((ie=(oe=e.selectedStall)==null?void 0:oe.categories)==null?void 0:ie.description),1)]),a[20]||(a[20]=t("h3",{class:"mt-2 font-semibold text-secondary"},"Fees:",-1)),t("ul",ht,[(b(!0),x(ke,null,Se((ue=(de=e.selectedStall)==null?void 0:de.categories)==null?void 0:ue.fee,o=>(b(),x("li",{key:o.id},[t("strong",null,m(o.type)+":",1),h(" "+m(e.feeDetails(o)),1)]))),128))])])])])):S("",!0)])):S("",!0),e.step===2||e.checkIfReupload()?(b(),x("div",xt,[c(e.DocumentUpload,{requiredDocs:(B=v.requirements)==null?void 0:B.stall_new,files:e.localFileReq,"onUpdate:files":a[3]||(a[3]=o=>e.localFileReq=o)},null,8,["requiredDocs","files"]),c(e.InputError,{class:"mt-2",message:e.form.errors.requirements},null,8,["message"])])):S("",!0),!e.checkIfEdit()&&!e.checkIfReupload()?(b(),x("div",vt,[e.step===3?(b(),x("div",_t,[a[21]||(a[21]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Please review the rental agreement below and upload signature: ",-1)),c(e.PdfMonitor,{pdfUrl:"/sample.pdf"}),c(e.SingleImageUpload,{modelValue:e.signature,"onUpdate:modelValue":a[4]||(a[4]=o=>e.signature=o),width:120,height:60,files:e.localFileSignature,"onUpdate:files":a[5]||(a[5]=o=>e.localFileSignature=o)},null,8,["modelValue","files"])])):S("",!0),e.step===4?(b(),x("div",wt,[a[27]||(a[27]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Summary: ",-1)),a[28]||(a[28]=t("div",{class:"flex items-center justify-between"},null,-1)),t("div",kt,[t("div",St,[t("div",qt,m(e.initials),1),t("span",Rt,m((V=(A=(ce=(me=C.$page)==null?void 0:me.props)==null?void 0:ce.auth)==null?void 0:A.user)!=null&&V.status?"Active":"Not Active"),1)]),t("div",It,[t("h2",Ct,m(e.fullName((L=(M=(fe=C.$page)==null?void 0:fe.props)==null?void 0:M.auth)==null?void 0:L.user)),1),t("p",Mt,[a[22]||(a[22]=h(" Email: ",-1)),t("a",{href:"mailto:"+((G=(O=(z=(U=C.$page)==null?void 0:U.props)==null?void 0:z.auth)==null?void 0:O.user)==null?void 0:G.email),class:"text-blue-600 hover:underline"},m((X=(H=(J=C.$page)==null?void 0:J.props)==null?void 0:H.auth)==null?void 0:X.user.email),9,Pt)]),t("p",Dt,"Mobile: "+m((W=(K=(Q=C.$page)==null?void 0:Q.props)==null?void 0:K.auth)==null?void 0:W.user.mobile),1)])]),t("div",Tt,[t("div",null,[a[23]||(a[23]=t("h3",{class:"font-semibold text-secondary"},"Stall Details",-1)),t("p",Ft,"Stall Name: "+m((Y=e.selectedStall)==null?void 0:Y.name),1),t("p",Et,"Size: "+m((Z=e.selectedStall)!=null&&Z.size?`${(i=(n=e.selectedStall)==null?void 0:n.size)==null?void 0:i.length}X${(r=(u=e.selectedStall)==null?void 0:u.size)==null?void 0:r.width} `:"-"),1),t("p",jt,"Birthday: "+m(e.formatDateShort(($=(k=(d=C.$page)==null?void 0:d.props)==null?void 0:k.auth)==null?void 0:$.user.birthday)),1),t("p",Nt,"Address: "+m((le=(te=(ee=C.$page)==null?void 0:ee.props)==null?void 0:te.auth)==null?void 0:le.user.address),1)]),t("div",null,[a[24]||(a[24]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Bt,m((E=e.selectedStall)==null?void 0:E.categories.name),1)])]),t("div",At,[a[26]||(a[26]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Vt,[(b(!0),x(ke,null,Se((ae=v.total_payments)==null?void 0:ae.breakdown,(o,Te)=>(b(),x("li",{key:Te,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",Lt,[t("span",null,[t("strong",Ut,m(o!=null&&o.size?`• ${o==null?void 0:o.type}(${o.size}): `:`• ${o==null?void 0:o.type}: `),1),t("span",zt,m(e.formatAmount(o==null?void 0:o.amount)),1)])])]))),128))]),t("p",Ot,[a[25]||(a[25]=h(" Calculated Quarterly Payment: ",-1)),t("span",Gt,m(e.formatAmount((j=v.total_payments)==null?void 0:j.total)),1)])])])):S("",!0)])):S("",!0),t("div",Jt,[c(e.Link,{href:e.checkIfEdit()?`/my-rentals/stall-leasing/${(ve=v.stallRental)==null?void 0:ve.id}`:"/my-rentals/stall-leasing",class:"text-red-600 hover:underline",tabindex:"-1"},{default:R(()=>[...a[29]||(a[29]=[h("Cancel",-1)])]),_:1},8,["href"]),t("div",Ht,[!e.checkIfEdit()&&!e.checkIfReupload()||e.checkIfRenewal()?(b(),x("div",Xt,[e.step>1?(b(),x("button",{key:0,type:"button",class:"px-4 py-2 mr-2 rounded-md bg-gray-200 hover:bg-gray-300",onClick:a[6]||(a[6]=o=>e.step--)}," Back ")):S("",!0),e.step<4?(b(),x("button",{key:1,type:"button",class:"px-4 py-2 rounded-md bg-primary text-white hover:bg-secondary",onClick:e.nextButton},m(e.step===3?"Agree":"Next"),1)):S("",!0)])):S("",!0),e.step===4||e.checkIfEdit()||e.checkIfReupload()?(b(),_e(e.LoadingButton,{key:1,loading:e.form.processing,class:"bg-primary ml-auto",type:"submit"},{default:R(()=>[h(m(e.checkIfEdit()||e.checkIfReupload()?"Submit":"Continue"),1)]),_:1},8,["loading"])):S("",!0)])])],32)])]),c(e.ConfirmationModal,{show:e.isSubmit,onClose:e.closeSubmit},{title:R(()=>[...a[30]||(a[30]=[h(" Confirm ",-1)])]),content:R(()=>[...a[31]||(a[31]=[t("div",{class:"space-y-4 p-4"},[t("p",{class:"text-gray-700 text-sm md:text-base"}," Do you confirm your intention to submit this request? Please submit the duly accomplished agreement form, downloaded after this process, to the Office of Public Market. ")],-1)])]),footer:R(()=>[t("div",Qt,[c(e.SecondaryButton,{onClick:e.closeSubmit},{default:R(()=>[...a[32]||(a[32]=[h(" Cancel ",-1)])]),_:1}),t("form",{onSubmit:a[7]||(a[7]=we(o=>e.checkIfRenewal()?e.renewals():e.submit(),["prevent"]))},[c(e.LoadingButton,{class:"bg-green-600 text-white ml-2 px-4 py-2 rounded-md text-white hover:bg-green-700",disabled:e.isGenerating},{default:R(()=>[...a[33]||(a[33]=[h(" Submit ",-1)])]),_:1},8,["disabled"]),c(e.Contract,{ref:"contractRef",src:"/sample.pdf",data:e.contractData,"field-map":e.fieldMap,"file-name":"contract-filled.pdf",signature:e.signature,class:"hidden"},null,8,["data","signature"])],32)])]),_:1},8,["show"])]}),_:1})}const fl=Ke(We,[["render",Kt],["__file","Form.vue"]]);export{fl as default};
