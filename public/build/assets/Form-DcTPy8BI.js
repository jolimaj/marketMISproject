import{c as Se,o as g,w as S,a as t,b as m,f as v,t as u,d as p,e as I,n as R,p as Ie,F as pe,r as ye,H as qe,g as q,u as Re,L as Ce,i as Me,B as Pe,j as le,l as Fe}from"./app-B_8Clt4P.js";import{S as De,C as je,P as Be,M as Ne,D as Ae,d as fe}from"./SingleImageUpload-C_k88YbA.js";import{h as ge,i as Ee,j as xe,m as Ve,f as he,g as Ue,a as Le,c as Te}from"./helper-ugt-wfEi.js";import{A as ze}from"./AppLayout-ISdFsMSZ.js";import{T as Oe}from"./TextInput-CBfK-aIZ.js";import{L as Ge}from"./LoadingButton-CBJH3rPE.js";import{I as He}from"./InputLabel-BowFBAax.js";import{I as Je}from"./InputError-yB1VGq5j.js";import{M as Xe}from"./MultiSelect-CcKoXtx5.js";import{C as Qe}from"./ConfirmationModal-C6y1BjWn.js";import{S as Ke}from"./SecondaryButton-C27L6fll.js";import{S as We}from"./SelectInput-D1zS9BnL.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo--O1JlZvE.js";import"./Icons-DhN38kpC.js";import"./Footer-BWsEWx2g.js";import"./Modal-DYXm2ik1.js";import"./v4-C6aID195.js";const Ze={__name:"Form",props:{stallTypes:Object,stallTypesAll:Object,tableRental:Object,requirements:Object,paymentDetails:Object,fees:Object,auth:Object,total_payments:Object},setup(C,{expose:l}){var V,U,L,z,O,G,H,J,X,Q,K,W;l();const x=qe(),e=q([]),be=q([]),_=q(1),w=q(null),B=q({}),M=q(null),T=q(!1),N=q([]),b=q(!1),P=q(null),a=C,y=()=>Ee(x.url),h=()=>(console.log("isReuploadPage(page.url)",xe(x.url)),xe(x.url)),f=()=>(console.log("checkIfRenewal(page.url)",ge(x.url)),ge(x.url)),ae=()=>{var n;return h()||f()||y()?(n=a==null?void 0:a.tableRental)==null?void 0:n.name:"Create New"},s=Re({type:f()?2:1,business_name:f()||y()||h()?(V=a==null?void 0:a.tableRental)==null?void 0:V.name:"",stall_id:f()||y()||h()?(L=(U=a==null?void 0:a.tableRental)==null?void 0:U.stalls)==null?void 0:L.id:"",requirements:[],acknowledgeContract:f()||y()||h()?(z=a==null?void 0:a.tableRental)==null?void 0:z.acknowledgeContract:"",reference_number:f()||y()||h()?(G=(O=a==null?void 0:a.tableRental)==null?void 0:O.paymentRecord)==null?void 0:G.reference_number:"",attachment_signature:[],total_payment:f()||y()||h()?(J=(H=a==null?void 0:a.tableRental)==null?void 0:H.paymentRecord)==null?void 0:J.total_payments:0,fees:f()||y()||h()?Array.isArray((X=a==null?void 0:a.tableRental)==null?void 0:X.fees_additional)?(Q=a==null?void 0:a.tableRental)==null?void 0:Q.fees_additional.map(Number):[]:[],step:_.value,bulb:f()||y()||h()?(K=a==null?void 0:a.tableRental)==null?void 0:K.bulb:null,stall_rental_id:f()||y()||h()?(W=a==null?void 0:a.tableRental)==null?void 0:W.id:null}),se={lesseeName:{page:0,x:160,y:530},lesseeNamePage2:{page:2,x:110,y:370},barangay:{page:0,x:320,y:520},stallNo:{page:0,x:300,y:440},day:{page:2,x:120,y:300},month:{page:2,x:500,y:310},signature:{page:2,x:450,y:200,w:100,h:50}},re=Ce(()=>{var i,c;return((c=(i=a.auth)==null?void 0:i.user)==null?void 0:c.first_name.split(" ")).map(r=>r[0]).join("")}),ne=()=>{var n,i,c;E(s.fees)&&s.bulb<0&&(s.errors.bulb="Please input number of bulbs."),s.requirements=y()?(n=a==null?void 0:a.tableRental)==null?void 0:n.requirements.map(r=>({requirement_checklist_id:r.checklist_id,attachment:r.attachment})):e.value.map(r=>({requirement_checklist_id:r.documentType,attachment:r.file})),s.attachment_signature=M.value,s.total_payment=(i=a==null?void 0:a.total_payments)==null?void 0:i.total,s.acknowledgeContract=!0,s.fees_additional=s.fees,b.value=!0,(c=P.value)==null||c.fillContract(),b.value&&s.post(route("applications.table.store"),{preserveScroll:!0,onSuccess:async()=>{b.value=!1,le.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{console.error("Form errors:",r)}})},oe=async()=>{var i,c;if(e.value.some(r=>r.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const n=new FormData;n.append("_method","PUT"),n.append("stall_id",s.stall_id||""),n.append("business_name",s.business_name||""),n.append("type",2),n.append("bulb",s.bulb||""),n.append("total_payment",s.total_payment||""),n.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((r,d)=>{n.append(`requirements[${d}][requirement_checklist_id]`,r.documentType),r.file instanceof File&&n.append(`requirements[${d}][attachment]`,r.file)}),s.attachment_signature instanceof File&&n.append("attachment_signature",s.attachment_signature),b.value=!0,(i=P.value)==null||i.fillContract(),fe.Inertia.post(route("applications.table.update",(c=a==null?void 0:a.tableRental)==null?void 0:c.id),n,{preserveScroll:!0,onStart:()=>{b.value=!0},onSuccess:()=>{le.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:r=>{b.value=!1,console.error("Form errors:",r)}})},ie=()=>{var n,i,c;if(h()){if(e.value.some(d=>d.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}const r=new FormData;r.append("_method","PUT"),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",s.type||""),r.append("bulb",s.bulb||""),r.append("total_payment",s.total_payment||""),r.append("acknowledgeContract",s.acknowledgeContract?1:0),e.value.forEach((d,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,d.documentType),d.file instanceof File&&r.append(`requirements[${k}][attachment]`,d.file)}),s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),fe.Inertia.post(route("applications.table.update",(n=a==null?void 0:a.tableRental)==null?void 0:n.id),r,{preserveScroll:!0,onStart:()=>{b.value=!0},onSuccess:()=>{b.value=!1,le.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:d=>{b.value=!1,console.error("Form errors:",d)}})}else{const r=new FormData;if(r.append("_method","PUT"),E(s.fees)&&s.bulb<0&&(s.errors.bulb="Please input number of bulbs."),r.append("stall_id",s.stall_id||""),r.append("business_name",s.business_name||""),r.append("type",1),r.append("bulb",s.bulb||0),r.append("total_payment",((i=a==null?void 0:a.total_payments)==null?void 0:i.total)||0),r.append("acknowledgeContract",s.acknowledgeContract?1:0),f()){if(r.append("type",2),e.value.some(d=>d.status==="uploading")){s.errors.requirements="Please wait until all files are uploaded.";return}if(e.value.length===0){s.errors.requirements="The requirements are required.";return}e.value.forEach((d,k)=>{r.append(`requirements[${k}][requirement_checklist_id]`,d.documentType),d.file instanceof File&&r.append(`requirements[${k}][attachment]`,d.file)})}s.attachment_signature instanceof File&&r.append("attachment_signature",s.attachment_signature),fe.Inertia.post(route("applications.table.update",(c=a==null?void 0:a.tableRental)==null?void 0:c.id),r,{preserveScroll:!0,onStart:()=>{b.value=!0},onSuccess:()=>{var d;b.value=!1,(d=P.value)==null||d.fillContract(),le.visit(route("applications.table.index"),{preserveScroll:!0,preserveState:!1})},onError:d=>{b.value=!1,console.error("Form errors:",d)}})}},de=n=>`${Te(n.amount)} per table`,ue=()=>{var n,i,c,r,d,k,Y,Z,$;if(E(s.fees)&&s.bulb<0&&(s.errors.bulb="Please input number of bulbs."),console.log(_.value,ge()),_.value===1)f()?s.put(route("applications.table.renew",(n=a==null?void 0:a.tableRental)==null?void 0:n.id),{onSuccess:()=>{_.value++}}):s.post(route("applications.table.store"),{preserveState:!0,onSuccess:()=>{_.value++}});else if(_.value===2){const ee=((c=(i=a==null?void 0:a.requirements)==null?void 0:i.stall_new)==null?void 0:c.length)||0,D=e.value.filter(j=>j.status==="uploaded").length,te=e.value.some(j=>j.status==="uploading");console.log("Required:",ee,"Uploaded:",D,"Uploading:",te),te?s.errors.requirements="Please wait until all files are uploaded.":D<ee?s.errors.requirements="Please upload all required documents.":D===0?s.errors.requirements="The requirements are required.":(s.errors.requirements=null,_.value++)}else _.value===3?(be.value=M.value,_.value++):_.value===4&&(s.step=_.value,console.log("checkIfRenewal",f()),B.value={lesseeName:he((r=a==null?void 0:a.auth)==null?void 0:r.user),lesseeNamePage2:he((d=a==null?void 0:a.auth)==null?void 0:d.user),barangay:(Y=(k=a==null?void 0:a.auth)==null?void 0:k.user)==null?void 0:Y.address,stallNo:(Z=w==null?void 0:w.value)!=null&&Z.name?($=w==null?void 0:w.value)==null?void 0:$.name:"",signature:M.value,day:new Date().getDate(),month:new Date().getMonth()+1},T.value=!0)},F=n=>{if(!n){w.value=null;return}const i=a.stallTypesAll.find(c=>c.id===n);console.log("Selected Stall:",i),w.value=i||null},me=()=>{T.value=!1},E=n=>{const i=n.find(c=>c===3);return console.log((i==null?void 0:i.length)>0,i),!i};N.value=a.stallsData||[],Me(()=>s.stall_id,n=>{F(n)},{immediate:!0}),Pe(()=>{var n,i;(y()||f())&&F((i=(n=a==null?void 0:a.tableRental)==null?void 0:n.stalls)==null?void 0:i.id)});const A={page:x,localFileReq:e,localFileSignature:be,step:_,selectedStall:w,contractData:B,signature:M,isSubmit:T,stallData:N,isGenerating:b,contractRef:P,props:a,checkIfEdit:y,checkIfReupload:h,checkIfRenewal:f,titlePage:ae,form:s,fieldMap:se,initials:re,submit:ne,renewals:oe,update:ie,feeDetails:de,nextButton:ue,onStallSelect:F,closeSubmit:me,handleBulb:E,ref:q,watch:Me,computed:Ce,onMounted:Pe,get Link(){return Fe},get usePage(){return qe},get useForm(){return Re},get router(){return le},get Inertia(){return fe.Inertia},get formatAmount(){return Te},get formatDateShort(){return Le},get formatStallStatus(){return Ue},get fullName(){return he},get isEditPage(){return Ee},get isRenewalPage(){return ge},get isReuploadPage(){return xe},get mapTablesToGeoJSON(){return Ve},AppLayout:ze,TextInput:Oe,LoadingButton:Ge,InputLabel:He,InputError:Je,DocumentUpload:Ae,Map:Ne,PdfMonitor:Be,Contract:je,SingleImageUpload:De,MultiSelect:Xe,ConfirmationModal:Qe,SecondaryButton:Ke,SelectInput:We};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}},$e={class:"mb-8 text-3xl font-bold"},et={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},tt={class:"max-w-3xl bg-white rounded-md shadow overflow-hidden"},lt={key:0,class:"flex items-center justify-between mt-6"},at={class:"flex flex-col items-center text-center w-1/3"},st={class:"flex flex-col items-center text-center w-1/3"},rt={class:"flex flex-col items-center text-center w-1/3"},nt={class:"flex flex-col items-center text-center w-1/3"},ot={key:0,class:"p-6 space-y-6"},it={class:"flex flex-col md:flex-row gap-4 px-5"},dt={class:"w-full md:w-full"},ut={class:"flex flex-col md:flex-row gap-4 px-5"},mt={class:"w-full md:w-full"},ct={class:"flex flex-col md:flex-row gap-4 px-5"},ft={class:"w-full md:w-full"},gt={class:"flex flex-col md:flex-row gap-4 px-5"},bt={class:"w-full md:w-full"},pt=["value"],yt={key:0,class:"flex flex-col md:flex-row gap-4 px-5"},xt={class:"w-full md:w-full"},ht={class:"border p-4 rounded bg-gray-50"},vt={class:"ml-4 list-disc"},_t={key:1,class:"p-6 space-y-6"},wt={key:2},kt={key:0,class:"p-6 space-y-6"},St={key:1,class:"p-6 space-y-6"},It={class:"flex gap-6"},qt={class:"flex flex-col items-center"},Rt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},Ct={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},Mt={class:"flex-1"},Pt={class:"text-lg font-semibold text-primary"},Et={class:"text-sm text-gray-600"},Tt=["href"],Ft={class:"text-sm text-gray-600"},Dt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},jt={class:"text-gray-600"},Bt={class:"text-gray-600"},Nt={class:"text-gray-600"},At={class:"text-gray-600"},Vt={class:"text-gray-600"},Ut={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Lt={class:"space-y-2"},zt={class:"flex items-center space-x-2"},Ot={class:"text-secondary"},Gt={class:"text-gray-600"},Ht={class:"font-bold text-gray-600"},Jt={class:"text-green-600 font-semibold"},Xt={class:"flex items-center px-8 py-4 bg-gray-50 border-t border-gray-100"},Qt={class:"ml-auto flex gap-2"},Kt={key:0},Wt={class:"flex justify-end space-x-3 p-4"};function Yt(C,l,x,e,be,_){return g(),Se(e.AppLayout,{title:"Stall Types"},{header:S(()=>[...l[10]||(l[10]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Stall Types ",-1)])]),default:S(()=>{var w,B,M,T,N,b,P,a,y,h,f,ae,s,se,re,ne,oe,ie,de,ue,F,me,E,A,V,U,L,z,O,G,H,J,X,Q,K,W,n,i,c,r,d,k,Y,Z,$,ee,D,te,j,ve,_e,we;return[t("h1",$e,[m(e.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/stall-leasing"},{default:S(()=>[...l[11]||(l[11]=[v("Table Spaces",-1)])]),_:1}),l[12]||(l[12]=t("span",{class:"text-secondary font-medium"},"/",-1)),v(" "+u(e.titlePage()),1)]),t("div",et,[t("div",tt,[!e.checkIfEdit()&&!e.checkIfReupload()?(g(),p("div",lt,[t("div",at,[t("div",{class:R(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===1?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[13]||(l[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A7.968 7.968 0 0112 15c1.933 0 3.683.69 5.121 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],2),t("span",{class:R(["mt-2 text-sm",e.step===1?"text-primary font-semibold":"text-gray-400"])},"Vendor Info",2)]),t("div",{class:R(["flex-1 border-t-2 mx-2",e.step>1?"border-primary":"border-gray-200"])},null,2),t("div",st,[t("div",{class:R(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===2?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[14]||(l[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h10M7 11h10M7 15h6M5 5v14h14V5H5z"})],-1)])],2),t("span",{class:R(["mt-2 text-sm",e.step===2?"text-primary font-semibold":"text-gray-400"])},"Requirements",2)]),t("div",{class:R(["flex-1 border-t-2 mx-2",e.step>2?"border-primary":"border-gray-200"])},null,2),t("div",rt,[t("div",{class:R(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===3?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[15]||(l[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01M21 21l-6-6"})],-1)])],2),t("span",{class:R(["mt-2 text-sm",e.step===3?"text-primary font-semibold":"text-gray-400"])},"Rental Agreement",2)]),t("div",nt,[t("div",{class:R(["flex items-center justify-center w-12 h-12 rounded-full border-2",e.step===4?"bg-primary text-white border-primary":"border-gray-300 text-gray-400"])},[...l[16]||(l[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",width:"32",height:"32"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M4 6h16M4 12h16M4 18h16"})],-1)])],2),t("span",{class:R(["mt-2 text-sm",e.step===4?"text-primary font-semibold":"text-gray-400"])},"Finish Application",2)])])):I("",!0),t("form",{onSubmit:l[8]||(l[8]=Ie(o=>e.checkIfEdit()||e.checkIfReupload()?e.update():e.nextButton(),["prevent"]))},[!e.checkIfReupload()&&(e.step===1||e.checkIfEdit())?(g(),p("div",ot,[t("div",it,[t("div",dt,[m(e.InputLabel,{for:"Business Name",value:"Business Name"}),m(e.TextInput,{id:"business_name",modelValue:e.form.business_name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.form.business_name=o),type:"text",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"business_name"},null,8,["modelValue"]),m(e.InputError,{class:"mt-2",message:(B=(w=e.form)==null?void 0:w.errors)==null?void 0:B.business_name},null,8,["message"])])]),t("div",ut,[t("div",mt,[m(e.InputLabel,{for:"Add ons",value:"Add ons"}),m(e.MultiSelect,{modelValue:e.form.fees,"onUpdate:modelValue":l[1]||(l[1]=o=>e.form.fees=o),options:x.fees},null,8,["modelValue","options"]),m(e.InputError,{class:"mt-2",message:(T=(M=e.form)==null?void 0:M.errors)==null?void 0:T.fees},null,8,["message"])])]),t("div",ct,[t("div",ft,[m(e.InputLabel,{for:"Add ons",value:"Bulbs"}),m(e.TextInput,{id:"bulbs",modelValue:e.form.bulb,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.bulb=o),type:"number",disabled:e.handleBulb(e.form.fees),class:"mt-1 block w-full",autofocus:"",autocomplete:"bulbs"},null,8,["modelValue","disabled"]),m(e.InputError,{class:"mt-2",message:(b=(N=e.form)==null?void 0:N.errors)==null?void 0:b.bulb},null,8,["message"])])]),t("div",gt,[t("div",bt,[m(e.InputLabel,{for:"gender_id",value:"Table",class:"mb-1 block w-full"}),m(e.SelectInput,{modelValue:e.form.stall_id,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.stall_id=o),id:"stall_id",required:"",disabled:e.checkIfEdit(),autocomplete:"stall_id"},{default:S(()=>[(g(!0),p(pe,null,ye(x.stallTypes,o=>{var ce,ke;return g(),p("option",{key:o.id,value:e.checkIfEdit()?(ke=(ce=x.tableRental)==null?void 0:ce.stalls)==null?void 0:ke.id:o.id},u(o.name),9,pt)}),128))]),_:1},8,["modelValue","disabled"]),m(e.InputError,{class:"mt-2",message:(a=(P=e.form)==null?void 0:P.errors)==null?void 0:a.stall_id},null,8,["message"])])]),e.selectedStall?(g(),p("div",yt,[t("div",xt,[t("div",ht,[l[21]||(l[21]=t("h2",{class:"text-lg font-bold mb-2 text-secondary"},"Transient Details",-1)),t("p",null,[l[17]||(l[17]=t("strong",null,"Name:",-1)),v(" "+u((y=e.selectedStall)==null?void 0:y.name),1)]),t("p",null,[l[18]||(l[18]=t("strong",null,"Size:",-1)),v(" "+u((h=e.selectedStall)!=null&&h.size?`${(f=e.selectedStall)==null?void 0:f.size.length}X${(ae=e.selectedStall)==null?void 0:ae.size.width}`:"-"),1)]),t("p",null,[l[19]||(l[19]=t("strong",null,"Category:",-1)),v(" "+u((se=(s=e.selectedStall)==null?void 0:s.categories)==null?void 0:se.name),1)]),t("p",null,[l[20]||(l[20]=t("strong",null,"Description:",-1)),v(" "+u((ne=(re=e.selectedStall)==null?void 0:re.categories)==null?void 0:ne.description),1)]),l[22]||(l[22]=t("h3",{class:"mt-2 font-semibold text-secondary"},"Fees:",-1)),t("ul",vt,[(g(!0),p(pe,null,ye((ie=(oe=e.selectedStall)==null?void 0:oe.categories)==null?void 0:ie.fee,o=>(g(),p("li",{key:o.id},[t("strong",null,u(o.type)+":",1),v(" "+u(e.feeDetails(o)),1)]))),128))])])])])):I("",!0)])):I("",!0),e.step===2||e.checkIfReupload()?(g(),p("div",_t,[m(e.DocumentUpload,{requiredDocs:(de=x.requirements)==null?void 0:de.stall_new,files:e.localFileReq,"onUpdate:files":l[4]||(l[4]=o=>e.localFileReq=o)},null,8,["requiredDocs","files"]),m(e.InputError,{class:"mt-2",message:e.form.errors.requirements},null,8,["message"])])):I("",!0),!e.checkIfEdit()&&!e.checkIfReupload()?(g(),p("div",wt,[e.step===3?(g(),p("div",kt,[l[23]||(l[23]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Please review the rental agreement below and upload signature: ",-1)),m(e.PdfMonitor,{pdfUrl:"/sample.pdf"}),m(e.SingleImageUpload,{modelValue:e.signature,"onUpdate:modelValue":l[5]||(l[5]=o=>e.signature=o),width:120,height:60,files:e.localFileSignature,"onUpdate:files":l[6]||(l[6]=o=>e.localFileSignature=o)},null,8,["modelValue","files"])])):I("",!0),e.step===4?(g(),p("div",St,[l[29]||(l[29]=t("h2",{class:"text-lg font-bold text-secondary mb-2"}," Summary: ",-1)),l[30]||(l[30]=t("div",{class:"flex items-center justify-between"},null,-1)),t("div",It,[t("div",qt,[t("div",Rt,u(e.initials),1),t("span",Ct,u((E=(me=(F=(ue=C.$page)==null?void 0:ue.props)==null?void 0:F.auth)==null?void 0:me.user)!=null&&E.status?"Active":"Not Active"),1)]),t("div",Mt,[t("h2",Pt,u(e.fullName((U=(V=(A=C.$page)==null?void 0:A.props)==null?void 0:V.auth)==null?void 0:U.user)),1),t("p",Et,[l[24]||(l[24]=v(" Email: ",-1)),t("a",{href:"mailto:"+((G=(O=(z=(L=C.$page)==null?void 0:L.props)==null?void 0:z.auth)==null?void 0:O.user)==null?void 0:G.email),class:"text-blue-600 hover:underline"},u((X=(J=(H=C.$page)==null?void 0:H.props)==null?void 0:J.auth)==null?void 0:X.user.email),9,Tt)]),t("p",Ft,"Mobile: "+u((W=(K=(Q=C.$page)==null?void 0:Q.props)==null?void 0:K.auth)==null?void 0:W.user.mobile),1)])]),t("div",Dt,[t("div",null,[l[25]||(l[25]=t("h3",{class:"font-semibold text-secondary"},"Stall Details",-1)),t("p",jt,"Stall Name: "+u((n=e.selectedStall)==null?void 0:n.name),1),t("p",Bt,"Size: "+u((i=e.selectedStall)!=null&&i.size?`${(r=(c=e.selectedStall)==null?void 0:c.size)==null?void 0:r.length}X${(k=(d=e.selectedStall)==null?void 0:d.size)==null?void 0:k.width} `:"-"),1),t("p",Nt,"Birthday: "+u(e.formatDateShort(($=(Z=(Y=C.$page)==null?void 0:Y.props)==null?void 0:Z.auth)==null?void 0:$.user.birthday)),1),t("p",At,"Address: "+u((te=(D=(ee=C.$page)==null?void 0:ee.props)==null?void 0:D.auth)==null?void 0:te.user.address),1)]),t("div",null,[l[26]||(l[26]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Vt,u((j=e.selectedStall)==null?void 0:j.categories.name),1)])]),t("div",Ut,[l[28]||(l[28]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Lt,[(g(!0),p(pe,null,ye((ve=x.total_payments)==null?void 0:ve.breakdown,(o,ce)=>(g(),p("li",{key:ce,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",zt,[t("span",null,[t("strong",Ot,u(o!=null&&o.size?`• ${o==null?void 0:o.type}(${o.size}): `:`• ${o==null?void 0:o.type}: `),1),t("span",Gt,u(e.formatAmount(o==null?void 0:o.amount)),1)])])]))),128))]),t("p",Ht,[l[27]||(l[27]=v(" Calculated Quarterly Payment: ",-1)),t("span",Jt,u(e.formatAmount((_e=x.total_payments)==null?void 0:_e.total)),1)])])])):I("",!0)])):I("",!0),t("div",Xt,[m(e.Link,{href:e.checkIfEdit()?`/my-rentals/stall-leasing/${(we=x.tableRental)==null?void 0:we.id}`:"/my-rentals/stall-leasing",class:"text-red-600 hover:underline",tabindex:"-1"},{default:S(()=>[...l[31]||(l[31]=[v("Cancel",-1)])]),_:1},8,["href"]),t("div",Qt,[!e.checkIfEdit()&&!e.checkIfReupload()||e.checkIfRenewal()?(g(),p("div",Kt,[e.step>1?(g(),p("button",{key:0,type:"button",class:"px-4 py-2 mr-2 rounded-md bg-gray-200 hover:bg-gray-300",onClick:l[7]||(l[7]=o=>e.step--)}," Back ")):I("",!0),e.step<4?(g(),p("button",{key:1,type:"button",class:"px-4 py-2 rounded-md bg-primary text-white hover:bg-secondary",onClick:e.nextButton},u(e.step===3?"Agree":"Next"),1)):I("",!0)])):I("",!0),e.step===4||e.checkIfEdit()||e.checkIfReupload()?(g(),Se(e.LoadingButton,{key:1,loading:e.form.processing,class:"bg-primary ml-auto",type:"submit"},{default:S(()=>[v(u(e.checkIfEdit()?"Submit":"Continue"),1)]),_:1},8,["loading"])):I("",!0)])])],32)])]),m(e.ConfirmationModal,{show:e.isSubmit,onClose:e.closeSubmit},{title:S(()=>[...l[32]||(l[32]=[v(" Confirm ",-1)])]),content:S(()=>[...l[33]||(l[33]=[t("div",{class:"space-y-4 p-4"},[t("p",{class:"text-gray-700 text-sm md:text-base"}," Do you confirm your intention to submit this request? Please submit the duly accomplished agreement form, downloaded after this process, to the Office of Public Market. ")],-1)])]),footer:S(()=>[t("div",Wt,[m(e.SecondaryButton,{onClick:e.closeSubmit},{default:S(()=>[...l[34]||(l[34]=[v(" Cancel ",-1)])]),_:1}),t("form",{onSubmit:l[9]||(l[9]=Ie(o=>e.checkIfRenewal()?e.renewals():e.submit(),["prevent"]))},[m(e.LoadingButton,{class:"bg-green-600 text-white ml-2 px-4 py-2 rounded-md text-white hover:bg-green-700",disabled:e.isGenerating},{default:S(()=>[...l[35]||(l[35]=[v(" Submit ",-1)])]),_:1},8,["disabled"]),m(e.Contract,{ref:"contractRef",src:"/sample.pdf",data:e.contractData,"field-map":e.fieldMap,"file-name":"contract-filled.pdf",signature:e.signature,class:"hidden"},null,8,["data","signature"])],32)])]),_:1},8,["show"])]}),_:1})}const pl=Ye(Ze,[["render",Yt],["__file","Form.vue"]]);export{pl as default};
