import{c as ct,o as i,w as f,a as t,b as it,f as u,t as n,d,e as h,n as x,F as b,r as R,L as dt,j as S,l as xt}from"./app-B_8Clt4P.js";import{f as gt,g as yt,a as _t,c as vt}from"./helper-ugt-wfEi.js";import{A as ft}from"./AppLayout-ISdFsMSZ.js";import{B as ht}from"./BaseTable-DIJ5rBel.js";import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo--O1JlZvE.js";import"./Icons-DhN38kpC.js";import"./Footer-BWsEWx2g.js";const Rt={__name:"Details",props:{volanteRental:Object,auth:Object},setup(A,{expose:e}){e();const s=A,l=dt(()=>{var r,y;return((y=(r=s.volanteRental)==null?void 0:r.vendor)==null?void 0:y.first_name.split(" ")).map(v=>v[0]).join("")}),g={props:s,initials:l,headers:["Date","Amount","Reference Number","Receipt"],goToEdit:m=>{S.get(`/my-rentals/market-volante/${m}/edit`)},goToReupload:m=>{S.get(`/my-rentals/market-volante/${m}/reupload`)},printAttachment:m=>{const r=window.open(m,"_blank");r.focus(),r.print()},status:m=>{let r={color:"blue",status:"Vacant"};switch(m){case 3:r={color:"orange",status:"Expired"};break;case 2:r={color:"red",status:"Rejected"};break;case 1:r={color:"green",status:"Approved"};break;default:r={color:"blue",status:"Pending"}}return r},computed:dt,get Link(){return xt},get router(){return S},get formatAmount(){return vt},get formatDateShort(){return _t},get formatStallStatus(){return yt},get fullName(){return gt},AppLayout:ft,BaseTable:ht};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}},wt={class:"mb-8 text-3xl font-bold"},pt={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto"},kt={class:"flex items-center justify-between"},St={class:"text-sm text-gray-600"},At={class:"flex gap-6"},Dt={class:"flex flex-col items-center"},jt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},Nt={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},Tt={class:"flex-1"},Ct={class:"text-lg font-semibold text-primary"},Bt={class:"text-sm text-gray-600"},Vt=["href"],zt={class:"text-sm text-gray-600"},Pt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},Et={class:"text-sm text-gray-700 mb-2"},Lt={class:"text-gray-600"},Mt={class:"text-gray-600"},Ht={class:"text-gray-600"},Ot={class:"text-gray-600"},Ft={class:"text-gray-600"},It={class:"text-gray-600"},Qt={class:"text-gray-600"},Wt={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Gt={class:"space-y-2"},Jt={class:"flex items-center space-x-2"},Kt={class:"text-secondary"},Ut={class:"text-gray-600"},Xt={class:"text-gray-600"},Yt={class:"font-bold"},Zt={class:"text-gray-600"},qt={class:"text-red-500 font-semibold"},$t={class:"text-gray-600"},te={class:"font-bold text-secondary"},ee={class:"text-green-600 font-semibold"},se={class:"space-y-2 text-sm"},ae={class:"text-gray-600"},ne={class:"flex gap-2"},le={class:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-600 hover:bg-blue-200"},oe=["href"],re=["onClick"],ie={key:0,class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},de={class:"space-y-2 text-sm"},me={class:"flex items-center space-x-2"},ue={class:"space-y-2"},ce={class:"flex items-center space-x-2"},xe={class:"text-secondary"},ge={class:"text-gray-600"},ye={class:"flex justify-end gap-2"},_e=["disabled"],ve=["disabled"],fe=["disabled"],he={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto mt-5"},be={class:"px-4 py-3 capitalize"},Re={class:"px-4 py-3 capitalize"},we={class:"px-4 py-3 capitalize"},pe={class:"px-4 py-3"},ke={key:0};function Se(A,e,s,l,mt,ut){return i(),ct(l.AppLayout,{title:"Stall Types"},{header:f(()=>[...e[3]||(e[3]=[t("h2",{class:"font-semibold text-xl text-secondary leading-tight"}," Stall Types ",-1)])]),default:f(()=>{var w,p,k,g,m,r,y,v,D,j,N,T,C,B,V,z,P,E,L,M,H,O,F,I,Q,W,G,J,K,U,X,Y,Z,q,$,tt,et,st,at,nt,lt,ot,rt;return[t("h1",wt,[it(l.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/market-volante"},{default:f(()=>[...e[4]||(e[4]=[u("Market Volante",-1)])]),_:1}),e[5]||(e[5]=t("span",{class:"text-secondary font-medium"},"/",-1)),u(" "+n((w=s.volanteRental)==null?void 0:w.name),1)]),t("div",pt,[t("div",kt,[e[6]||(e[6]=t("h1",{class:"text-xl font-bold text-secondary"}," Market Volante Rental Details ",-1)),t("span",St,"Rental No.: "+n(((k=(p=s.volanteRental)==null?void 0:p.permits)==null?void 0:k.permit_number)||"-"),1)]),t("div",At,[t("div",Dt,[t("div",jt,n(l.initials),1),t("span",Nt,n((m=(g=s.volanteRental)==null?void 0:g.vendor)!=null&&m.status?"Active":"Not Active"),1)]),t("div",Tt,[t("h2",Ct,n(l.fullName(s.volanteRental.vendor)),1),t("p",Bt,[e[7]||(e[7]=u(" Email: ",-1)),t("a",{href:"mailto:"+((y=(r=s.volanteRental)==null?void 0:r.vendor)==null?void 0:y.email),class:"text-blue-600 hover:underline"},n((v=s.volanteRental)==null?void 0:v.vendor.email),9,Vt)]),t("p",zt,"Mobile: "+n((D=s.volanteRental)==null?void 0:D.vendor.mobile),1)])]),t("div",Pt,[t("div",null,[t("div",Et,[t("p",Lt,[e[8]||(e[8]=t("span",{class:"font-semibold"},"Type:",-1)),u(" "+n((j=s.volanteRental)==null?void 0:j.permits.type),1)]),t("p",Mt,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Date Issued:",-1)),u(" "+n((T=(N=s.volanteRental)==null?void 0:N.permits)!=null&&T.issued_date?l.formatDateShort((B=(C=s.volanteRental)==null?void 0:C.permits)==null?void 0:B.issued_date):"-"),1)])]),e[10]||(e[10]=t("h3",{class:"font-semibold text-secondary"},"Slot Details",-1)),t("p",Ht,"Business Name: "+n((V=s.volanteRental)==null?void 0:V.name),1),t("p",Ot,"Stall Name: "+n((z=s.volanteRental)==null?void 0:z.stalls.name),1),t("p",Ft,"Birthday: "+n(l.formatDateShort((P=s.volanteRental)==null?void 0:P.vendor.birthday)),1),t("p",It,"Address: "+n((E=s.volanteRental)==null?void 0:E.vendor.address),1)]),t("div",null,[e[11]||(e[11]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Qt,n((M=(L=s.volanteRental)==null?void 0:L.stalls)==null?void 0:M.stallsCategories.name),1),e[12]||(e[12]=t("h3",{class:"font-semibold mt-2 text-secondary"},"Status",-1)),t("p",{class:x(`text-${l.formatStallStatus((H=s.volanteRental.stalls)==null?void 0:H.status).color}-600`)},n(l.formatStallStatus((F=(O=s.volanteRental)==null?void 0:O.stalls)==null?void 0:F.status).status),3)])]),t("div",Wt,[e[17]||(e[17]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Gt,[(i(!0),d(b,null,R((I=s.volanteRental)==null?void 0:I.paymentDetails.breakdown,(a,c)=>(i(),d("li",{key:c,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",Jt,[t("span",null,[t("strong",Kt,n(a!=null&&a.size?`• ${a==null?void 0:a.type}(${a.size}): `:`• ${a==null?void 0:a.type}: `),1),t("span",Ut,n(l.formatAmount(a==null?void 0:a.amount)),1)])])]))),128))]),t("p",Xt,[e[13]||(e[13]=u(" Quarterly Payment: ",-1)),t("span",Yt,n(l.formatAmount(s.volanteRental.quarterly_payment)),1)]),t("p",Zt,[e[14]||(e[14]=u(" Payment Due: ",-1)),t("span",qt,n(s.volanteRental.next_payment_due?s.volanteRental.next_payment_due:"N/A"),1)]),t("p",$t,[e[15]||(e[15]=u(" Current Payment Status: ",-1)),t("span",{class:x(((Q=s.volanteRental)==null?void 0:Q.current_payment)==="Paid"?"text-green-600":"text-red-600")},n(s.volanteRental.current_payment),3)]),t("p",te,[e[16]||(e[16]=u(" Total: ",-1)),t("span",ee,n(l.formatAmount(s.volanteRental.quarterly_payment)),1)])]),t("div",null,[e[19]||(e[19]=t("h3",{class:"font-semibold text-secondary mb-2 text-sm"},"Requirements",-1)),t("ul",se,[(i(!0),d(b,null,R(s.volanteRental.requirements,a=>(i(),d("li",{key:a.name,class:"flex items-center justify-between bg-gray-50 p-2 rounded"},[t("span",ae,n(a.name),1),t("div",ne,[t("button",le,[a.url?(i(),d("a",{key:0,href:`${a.url}/${a.attachment}`,target:"_blank"}," View Attachment ",8,oe)):h("",!0)]),a.url?(i(),d("button",{key:0,onClick:c=>l.printAttachment(`${a.url}/${a.attachment}`),class:"flex items-center gap-1 px-2 py-1 text-xs rounded bg-green-100 text-green-600 hover:bg-green-200"},[...e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 9V2h12v7M6 18h12v4H6v-4zM6 14h12a2 2 0 002-2V9a2 2 0 00-2-2H6a2 2 0 00-2 2v3a2 2 0 002 2z"})],-1),u(" Print ",-1)])],8,re)):h("",!0)])]))),128))])]),((G=(W=s.volanteRental)==null?void 0:W.approvals)==null?void 0:G.length)>0?(i(),d("div",ie,[e[20]||(e[20]=t("h3",{class:"text-md font-semibold mb-3 text-primary"},"Approvals",-1)),t("ul",de,[t("li",me,[t("ul",ue,[(i(!0),d(b,null,R((J=s.volanteRental)==null?void 0:J.approvals,(a,c)=>{var _,o;return i(),d("li",{key:c,class:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg shadow-sm"},[t("div",ce,[t("span",null,[t("strong",xe,n(`${a==null?void 0:a.department}: `),1),t("span",ge,n(`${(_=a==null?void 0:a.approver)==null?void 0:_.name}(${(o=a==null?void 0:a.approver)==null?void 0:o.position}) - ${l.status(a.status).status}`),1)])])])}),128))])])])])):h("",!0),t("div",ye,[t("button",{onClick:e[0]||(e[0]=a=>l.goToEdit(s.volanteRental.id)),class:x(((U=(K=s.volanteRental)==null?void 0:K.permits)==null?void 0:U.status)===0||(X=s.volanteRental)!=null&&X.expiringSoon?"p-2 rounded-lg h bg-blue-600 text-white over:bg-blue-700":"p-2 rounded-lg h bg-blue-100 text-white over:bg-blue-100"),disabled:((Z=(Y=s.volanteRental)==null?void 0:Y.permits)==null?void 0:Z.status)!==0||((q=s.volanteRental)==null?void 0:q.expiringSoon)}," Edit ",10,_e),t("button",{onClick:e[1]||(e[1]=a=>l.goToReupload(s.volanteRental.id)),class:x(["p-2 rounded-lg hover:bg-red-200",((tt=($=s.volanteRental)==null?void 0:$.permits)==null?void 0:tt.status)===2||(et=s.volanteRental)!=null&&et.expiringSoon?"bg-red-600 text-white":"bg-red-200 text-white"]),disabled:((at=(st=s.volanteRental)==null?void 0:st.permits)==null?void 0:at.status)!==2||((nt=s.volanteRental)==null?void 0:nt.expiringSoon)}," Reupload Requirements ",10,ve),t("button",{onClick:e[2]||(e[2]=a=>l.goToEdit(s.volanteRental.id)),class:x((lt=s.volanteRental)!=null&&lt.expiringSoon?"p-2 rounded-lg h bg-green-600 text-white over:bg-green-700":"p-2 rounded-lg h bg-green-100 text-white over:bg-green-100"),disabled:!((ot=s.volanteRental)!=null&&ot.expiringSoon)}," Renew ",10,fe)])]),t("div",he,[e[22]||(e[22]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-xl font-bold text-secondary"}," Payment History ")],-1)),it(l.BaseTable,{headers:l.headers,data:(rt=s.volanteRental)==null?void 0:rt.payments_history,class:x("center text-center sticky right-0 bg-white z-10")},{row:f(({data:a})=>{var c,_;return[(i(!0),d(b,null,R(a,(o,Ae)=>(i(),d("tr",{key:s.volanteRental.id,class:"hover:bg-gray-50"},[t("td",be,n(o==null?void 0:o.date),1),t("td",Re,n(l.formatAmount(o==null?void 0:o.amount)),1),t("td",we,n(o==null?void 0:o.reference_number),1),t("td",pe,n(o==null?void 0:o.receipt),1)]))),128)),((_=(c=s.volanteRental)==null?void 0:c.payments_history)==null?void 0:_.length)===0?(i(),d("tr",ke,[...e[21]||(e[21]=[t("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):h("",!0)]}),_:1},8,["data"])])]}),_:1})}const Pe=bt(Rt,[["render",Se],["__file","Details.vue"]]);export{Pe as default};
