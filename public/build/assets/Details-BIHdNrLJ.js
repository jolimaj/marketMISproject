import{c as ot,o as i,w as f,a as t,b as st,f as u,t as l,d,e as S,n as h,F as b,r as R,I as at,Q as w,S as it}from"./app-BkL1CNwx.js";import{f as rt,e as dt,a as mt,c as ut}from"./helper-Jpd2WSUx.js";import{A as ct}from"./AppLayout-BPPdX9d-.js";import{B as xt}from"./BaseTable-COYnGHVO.js";import{_ as yt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-DeUXyAzp.js";import"./Icons-DwfuqtxP.js";import"./Footer-DHOCUsg6.js";const _t={__name:"Details",props:{stallRental:Object,auth:Object},setup(k,{expose:e}){e();const s=k,n=at(()=>{var r,y;return((y=(r=s.stallRental)==null?void 0:r.vendor)==null?void 0:y.first_name.split(" ")).map(g=>g[0]).join("")}),x={props:s,initials:n,headers:["Date","Amount","Reference Number","Receipt"],goToEdit:m=>{w.get(`/my-rentals/stall-leasing/${m}/edit`)},goToReupload:m=>{w.get(`/my-rentals/stall-leasing/${m}/reupload`)},status:m=>{let r={color:"blue",status:"Vacant"};switch(m){case 3:r={color:"orange",status:"Expired"};break;case 2:r={color:"red",status:"Rejected"};break;case 1:r={color:"green",status:"Approved"};break;default:r={color:"blue",status:"Pending"}}return r},computed:at,get Link(){return it},get router(){return w},get formatAmount(){return ut},get formatDateShort(){return mt},get formatStallStatus(){return dt},get fullName(){return rt},AppLayout:ct,BaseTable:xt};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}},gt={class:"mb-8 text-3xl font-bold"},ft={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto"},ht={class:"flex items-center justify-between"},bt={class:"text-sm text-gray-600"},Rt={class:"flex gap-6"},pt={class:"flex flex-col items-center"},vt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},St={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},wt={class:"flex-1"},kt={class:"text-lg font-semibold text-primary"},At={class:"text-sm text-gray-600"},Nt=["href"],Dt={class:"text-sm text-gray-600"},Tt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},jt={class:"text-sm text-gray-700 mb-2"},zt={class:"text-gray-600"},Bt={class:"text-gray-600"},Pt={class:"text-gray-600"},Ct={class:"text-gray-600"},Et={class:"text-gray-600"},Lt={class:"text-gray-600"},Vt={class:"text-gray-600"},Ot={class:"text-gray-600"},Qt={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Ft={class:"space-y-2"},It={class:"flex items-center space-x-2"},Jt={class:"text-secondary"},qt={class:"text-gray-600"},Ht={class:"text-gray-600"},Mt={class:"font-bold"},Xt={class:"text-gray-600"},Gt={class:"text-red-500 font-semibold"},Kt={class:"text-gray-600"},Ut={class:"font-bold text-secondary"},Wt={class:"text-green-600 font-semibold"},Yt={class:"space-y-2 text-sm"},Zt={class:"text-gray-600"},$t={class:"flex gap-2"},te={class:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-600 hover:bg-blue-200"},ee=["href"],se={key:0,class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},ae={class:"space-y-2 text-sm"},le={class:"flex items-center space-x-2"},ne={class:"space-y-2"},oe={class:"flex items-center space-x-2"},ie={class:"text-secondary"},re={class:"text-gray-600"},de={class:"flex justify-end gap-2"},me=["disabled"],ue=["disabled"],ce={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto mt-5"},xe={class:"px-4 py-3 capitalize"},ye={class:"px-4 py-3 capitalize"},_e={class:"px-4 py-3 capitalize"},ge={class:"px-4 py-3"},fe={key:0};function he(k,e,s,n,lt,nt){return i(),ot(n.AppLayout,{title:"Stall Types"},{header:f(()=>[...e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-secondary leading-tight"}," Stall Types ",-1)])]),default:f(()=>{var p,v,x,m,r,y,g,A,N,D,T,j,z,B,P,C,E,L,V,O,Q,F,I,J,q,H,M,X,G,K,U,W,Y,Z,$,tt,et;return[t("h1",gt,[st(n.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/stall-leasing"},{default:f(()=>[...e[3]||(e[3]=[u("Stalls Leasing",-1)])]),_:1}),e[4]||(e[4]=t("span",{class:"text-secondary font-medium"},"/",-1)),u(" "+l((p=s.stallRental)==null?void 0:p.name),1)]),t("div",ft,[t("div",ht,[e[5]||(e[5]=t("h1",{class:"text-xl font-bold text-secondary"}," Vendor Stall Leasing Details ",-1)),t("span",bt,"Rental No.: "+l(((x=(v=s.stallRental)==null?void 0:v.permits)==null?void 0:x.permit_number)||"-"),1)]),t("div",Rt,[t("div",pt,[t("div",vt,l(n.initials),1),t("span",St,l((r=(m=s.stallRental)==null?void 0:m.vendor)!=null&&r.status?"Active":"Not Active"),1)]),t("div",wt,[t("h2",kt,l(n.fullName(s.stallRental.vendor)),1),t("p",At,[e[6]||(e[6]=u(" Email: ",-1)),t("a",{href:"mailto:"+((g=(y=s.stallRental)==null?void 0:y.vendor)==null?void 0:g.email),class:"text-blue-600 hover:underline"},l((A=s.stallRental)==null?void 0:A.vendor.email),9,Nt)]),t("p",Dt,"Mobile: "+l((N=s.stallRental)==null?void 0:N.vendor.mobile),1)])]),t("div",Tt,[t("div",null,[t("div",jt,[t("p",zt,[e[7]||(e[7]=t("span",{class:"font-semibold"},"Type:",-1)),u(" "+l((D=s.stallRental)==null?void 0:D.permits.type),1)]),t("p",Bt,[e[8]||(e[8]=t("span",{class:"font-semibold"},"Date Issued:",-1)),u(" "+l((j=(T=s.stallRental)==null?void 0:T.permits)!=null&&j.issued_date?n.formatDateShort((B=(z=s.stallRental)==null?void 0:z.permits)==null?void 0:B.issued_date):"-"),1)])]),e[9]||(e[9]=t("h3",{class:"font-semibold text-secondary"},"Stall Details",-1)),t("p",Pt,"Business Name: "+l((P=s.stallRental)==null?void 0:P.business_name),1),t("p",Ct,"Stall Name: "+l((C=s.stallRental)==null?void 0:C.stalls.name),1),t("p",Et,"Size: "+l(`${JSON.parse((E=s.stallRental)==null?void 0:E.stalls.size).length}X${JSON.parse((L=s.stallRental)==null?void 0:L.stalls.size).width}`),1),t("p",Lt,"Birthday: "+l(n.formatDateShort((V=s.stallRental)==null?void 0:V.vendor.birthday)),1),t("p",Vt,"Address: "+l((O=s.stallRental)==null?void 0:O.vendor.address),1)]),t("div",null,[e[10]||(e[10]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Ot,l((F=(Q=s.stallRental)==null?void 0:Q.stalls)==null?void 0:F.stallsCategories.name),1),e[11]||(e[11]=t("h3",{class:"font-semibold mt-2 text-secondary"},"Status",-1)),t("p",{class:h(`text-${n.formatStallStatus((I=s.stallRental.stalls)==null?void 0:I.status).color}-600`)},l(n.formatStallStatus((q=(J=s.stallRental)==null?void 0:J.stalls)==null?void 0:q.status).status),3)])]),t("div",Qt,[e[16]||(e[16]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Ft,[(i(!0),d(b,null,R((H=s.stallRental)==null?void 0:H.paymentDetails.breakdown,(a,c)=>(i(),d("li",{key:c,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",It,[t("span",null,[t("strong",Jt,l(a!=null&&a.size?`• ${a==null?void 0:a.type}(${a.size}): `:`• ${a==null?void 0:a.type}: `),1),t("span",qt,l(n.formatAmount(a==null?void 0:a.amount)),1)])])]))),128))]),t("p",Ht,[e[12]||(e[12]=u(" Quarterly Payment: ",-1)),t("span",Mt,l(n.formatAmount(s.stallRental.quarterly_payment)),1)]),t("p",Xt,[e[13]||(e[13]=u(" Payment Due: ",-1)),t("span",Gt,l(s.stallRental.next_payment_due?s.stallRental.next_payment_due:"N/A"),1)]),t("p",Kt,[e[14]||(e[14]=u(" Current Payment Status: ",-1)),t("span",{class:h(((M=s.stallRental)==null?void 0:M.current_payment)==="Paid"?"text-green-600":"text-red-600")},l(s.stallRental.current_payment),3)]),t("p",Ut,[e[15]||(e[15]=u(" Total: ",-1)),t("span",Wt,l(n.formatAmount(s.stallRental.quarterly_payment)),1)])]),t("div",null,[e[17]||(e[17]=t("h3",{class:"font-semibold text-secondary mb-2 text-sm"},"Requirements",-1)),t("ul",Yt,[(i(!0),d(b,null,R(s.stallRental.requirements,a=>(i(),d("li",{key:a.name,class:"flex items-center justify-between bg-gray-50 p-2 rounded"},[t("span",Zt,l(a.name),1),t("div",$t,[t("button",te,[a.url?(i(),d("a",{key:0,href:`${a.url}/${a.attachment}`,target:"_blank"}," View Attachment ",8,ee)):S("",!0)])])]))),128))])]),((G=(X=s.stallRental)==null?void 0:X.approvals)==null?void 0:G.length)>0?(i(),d("div",se,[e[18]||(e[18]=t("h3",{class:"text-md font-semibold mb-3 text-primary"},"Approvals",-1)),t("ul",ae,[t("li",le,[t("ul",ne,[(i(!0),d(b,null,R((K=s.stallRental)==null?void 0:K.approvals,(a,c)=>{var _,o;return i(),d("li",{key:c,class:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg shadow-sm"},[t("div",oe,[t("span",null,[t("strong",ie,l(`${a==null?void 0:a.department}: `),1),t("span",re,l(`${(_=a==null?void 0:a.approver)==null?void 0:_.name}(${(o=a==null?void 0:a.approver)==null?void 0:o.position}) - ${n.status(a.status).status}`),1)])])])}),128))])])])])):S("",!0),t("div",de,[t("button",{onClick:e[0]||(e[0]=a=>n.goToEdit(s.stallRental.id)),class:"p-2 rounded-lg h bg-blue-600 text-white over:bg-blue-700",disabled:((W=(U=s.stallRental)==null?void 0:U.permits)==null?void 0:W.status)>0}," Edit Permit ",8,me),t("button",{onClick:e[1]||(e[1]=a=>n.goToReupload(s.stallRental.id)),class:h(["p-2 rounded-lg hover:bg-red-200",((Z=(Y=s.stallRental)==null?void 0:Y.permits)==null?void 0:Z.status)===2?"bg-red-600 text-white":"bg-red-200 text-white"]),disabled:((tt=($=s.stallRental)==null?void 0:$.permits)==null?void 0:tt.status)!==2}," Reupload Requirements ",10,ue)])]),t("div",ce,[e[20]||(e[20]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-xl font-bold text-secondary"}," Payment History ")],-1)),st(n.BaseTable,{headers:n.headers,data:(et=s.stallRental)==null?void 0:et.payments_history,class:h("center text-center sticky right-0 bg-white z-10")},{row:f(({data:a})=>{var c,_;return[(i(!0),d(b,null,R(a,(o,be)=>(i(),d("tr",{key:s.stallRental.id,class:"hover:bg-gray-50"},[t("td",xe,l(o==null?void 0:o.date),1),t("td",ye,l(n.formatAmount(o==null?void 0:o.amount)),1),t("td",_e,l(o==null?void 0:o.reference_number),1),t("td",ge,l(o==null?void 0:o.receipt),1)]))),128)),((_=(c=s.stallRental)==null?void 0:c.payments_history)==null?void 0:_.length)===0?(i(),d("tr",fe,[...e[19]||(e[19]=[t("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):S("",!0)]}),_:1},8,["data"])])]}),_:1})}const De=yt(_t,[["render",he],["__file","Details.vue"]]);export{De as default};
