import{c as gt,o as i,w as h,a as t,b as mt,f as u,t as a,d,e as w,n as x,F as b,r as R,L as ut,j as p,l as _t}from"./app-B_8Clt4P.js";import{f as yt,g as ft,a as ht,c as bt}from"./helper-ugt-wfEi.js";import{A as Rt}from"./AppLayout-ISdFsMSZ.js";import{B as vt}from"./BaseTable-DIJ5rBel.js";import{_ as St}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo--O1JlZvE.js";import"./Icons-DhN38kpC.js";import"./Footer-BWsEWx2g.js";const wt={__name:"Details",props:{stallRental:Object,auth:Object},setup(k,{expose:s}){s();const e=k,n=ut(()=>{var r,_;return((_=(r=e.stallRental)==null?void 0:r.vendor)==null?void 0:_.first_name.split(" ")).map(f=>f[0]).join("")}),g={props:e,initials:n,headers:["Date","Amount","Reference Number","Receipt"],goToEdit:m=>{p.get(`/my-rentals/stall-leasing/${m}/edit`)},goToReupload:m=>{p.get(`/my-rentals/stall-leasing/${m}/reupload`)},status:m=>{let r={color:"blue",status:"Vacant"};switch(m){case 3:r={color:"orange",status:"Expired"};break;case 2:r={color:"red",status:"Rejected"};break;case 1:r={color:"green",status:"Approved"};break;default:r={color:"blue",status:"Pending"}}return r},computed:ut,get Link(){return _t},get router(){return p},get formatAmount(){return bt},get formatDateShort(){return ht},get formatStallStatus(){return ft},get fullName(){return yt},AppLayout:Rt,BaseTable:vt};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}},pt={class:"mb-8 text-3xl font-bold"},kt={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto"},At={class:"flex items-center justify-between"},Nt={class:"text-sm text-gray-600"},Dt={class:"flex gap-6"},Tt={class:"flex flex-col items-center"},jt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},zt={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},Bt={class:"flex-1"},Ct={class:"text-lg font-semibold text-primary"},Et={class:"text-sm text-gray-600"},Lt=["href"],Pt={class:"text-sm text-gray-600"},Vt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},Ot={class:"text-sm text-gray-700 mb-2"},Ft={class:"text-gray-600"},Jt={class:"text-gray-600"},qt={class:"text-gray-600"},Ht={class:"text-gray-600"},It={class:"text-gray-600"},Mt={class:"text-gray-600"},Qt={class:"text-gray-600"},Xt={class:"text-gray-600"},Gt={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Kt={class:"space-y-2"},Ut={class:"flex items-center space-x-2"},Wt={class:"text-secondary"},Yt={class:"text-gray-600"},Zt={class:"text-gray-600"},$t={class:"font-bold"},te={class:"text-gray-600"},ee={class:"text-red-500 font-semibold"},se={class:"text-gray-600"},le={class:"font-bold text-secondary"},ae={class:"text-green-600 font-semibold"},ne={class:"space-y-2 text-sm"},oe={class:"text-gray-600"},ie={class:"flex gap-2"},re={class:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-600 hover:bg-blue-200"},de=["href"],me={key:0,class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},ue={class:"space-y-2 text-sm"},ce={class:"flex items-center space-x-2"},xe={class:"space-y-2"},ge={class:"flex items-center space-x-2"},_e={class:"text-secondary"},ye={class:"text-gray-600"},fe={class:"flex justify-end gap-2"},he=["disabled"],be=["disabled"],Re=["disabled"],ve={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto mt-5"},Se={class:"px-4 py-3 capitalize"},we={class:"px-4 py-3 capitalize"},pe={class:"px-4 py-3 capitalize"},ke={class:"px-4 py-3"},Ae={key:0};function Ne(k,s,e,n,ct,xt){return i(),gt(n.AppLayout,{title:"Stall Types"},{header:h(()=>[...s[3]||(s[3]=[t("h2",{class:"font-semibold text-xl text-secondary leading-tight"}," Stall Types ",-1)])]),default:h(()=>{var v,S,g,m,r,_,f,A,N,D,T,j,z,B,C,E,L,P,V,O,F,J,q,H,I,M,Q,X,G,K,U,W,Y,Z,$,tt,et,st,lt,at,nt,ot,it,rt,dt;return[t("h1",pt,[mt(n.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/stall-leasing"},{default:h(()=>[...s[4]||(s[4]=[u("Stalls Leasing",-1)])]),_:1}),s[5]||(s[5]=t("span",{class:"text-secondary font-medium"},"/",-1)),u(" "+a((v=e.stallRental)==null?void 0:v.name),1)]),t("div",kt,[t("div",At,[s[6]||(s[6]=t("h1",{class:"text-xl font-bold text-secondary"}," Vendor Stall Leasing Details ",-1)),t("span",Nt,"Rental No.: "+a(((g=(S=e.stallRental)==null?void 0:S.permits)==null?void 0:g.permit_number)||"-"),1)]),t("div",Dt,[t("div",Tt,[t("div",jt,a(n.initials),1),t("span",zt,a((r=(m=e.stallRental)==null?void 0:m.vendor)!=null&&r.status?"Active":"Not Active"),1)]),t("div",Bt,[t("h2",Ct,a(n.fullName(e.stallRental.vendor)),1),t("p",Et,[s[7]||(s[7]=u(" Email: ",-1)),t("a",{href:"mailto:"+((f=(_=e.stallRental)==null?void 0:_.vendor)==null?void 0:f.email),class:"text-blue-600 hover:underline"},a((A=e.stallRental)==null?void 0:A.vendor.email),9,Lt)]),t("p",Pt,"Mobile: "+a((N=e.stallRental)==null?void 0:N.vendor.mobile),1)])]),t("div",Vt,[t("div",null,[t("div",Ot,[t("p",Ft,[s[8]||(s[8]=t("span",{class:"font-semibold"},"Type:",-1)),u(" "+a((D=e.stallRental)==null?void 0:D.permits.type),1)]),t("p",Jt,[s[9]||(s[9]=t("span",{class:"font-semibold"},"Date Issued:",-1)),u(" "+a((j=(T=e.stallRental)==null?void 0:T.permits)!=null&&j.issued_date?n.formatDateShort((B=(z=e.stallRental)==null?void 0:z.permits)==null?void 0:B.issued_date):"-"),1)])]),s[10]||(s[10]=t("h3",{class:"font-semibold text-secondary"},"Stall Details",-1)),t("p",qt,"Business Name: "+a((C=e.stallRental)==null?void 0:C.business_name),1),t("p",Ht,"Stall Name: "+a((E=e.stallRental)==null?void 0:E.stalls.name),1),t("p",It,"Size: "+a(`${JSON.parse((L=e.stallRental)==null?void 0:L.stalls.size).length}X${JSON.parse((P=e.stallRental)==null?void 0:P.stalls.size).width}`),1),t("p",Mt,"Birthday: "+a(n.formatDateShort((V=e.stallRental)==null?void 0:V.vendor.birthday)),1),t("p",Qt,"Address: "+a((O=e.stallRental)==null?void 0:O.vendor.address),1)]),t("div",null,[s[11]||(s[11]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Xt,a((J=(F=e.stallRental)==null?void 0:F.stalls)==null?void 0:J.stallsCategories.name),1),s[12]||(s[12]=t("h3",{class:"font-semibold mt-2 text-secondary"},"Status",-1)),t("p",{class:x(`text-${n.formatStallStatus((q=e.stallRental.stalls)==null?void 0:q.status).color}-600`)},a(n.formatStallStatus((I=(H=e.stallRental)==null?void 0:H.stalls)==null?void 0:I.status).status),3)])]),t("div",Gt,[s[17]||(s[17]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Kt,[(i(!0),d(b,null,R((M=e.stallRental)==null?void 0:M.paymentDetails.breakdown,(l,c)=>(i(),d("li",{key:c,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",Ut,[t("span",null,[t("strong",Wt,a(l!=null&&l.size?`• ${l==null?void 0:l.type}(${l.size}): `:`• ${l==null?void 0:l.type}: `),1),t("span",Yt,a(n.formatAmount(l==null?void 0:l.amount)),1)])])]))),128))]),t("p",Zt,[s[13]||(s[13]=u(" Quarterly Payment: ",-1)),t("span",$t,a(n.formatAmount(e.stallRental.quarterly_payment)),1)]),t("p",te,[s[14]||(s[14]=u(" Payment Due: ",-1)),t("span",ee,a(e.stallRental.next_payment_due?e.stallRental.next_payment_due:"N/A"),1)]),t("p",se,[s[15]||(s[15]=u(" Current Payment Status: ",-1)),t("span",{class:x(((Q=e.stallRental)==null?void 0:Q.current_payment)==="Paid"?"text-green-600":"text-red-600")},a(e.stallRental.current_payment),3)]),t("p",le,[s[16]||(s[16]=u(" Total: ",-1)),t("span",ae,a(n.formatAmount(e.stallRental.quarterly_payment)),1)])]),t("div",null,[s[18]||(s[18]=t("h3",{class:"font-semibold text-secondary mb-2 text-sm"},"Requirements",-1)),t("ul",ne,[(i(!0),d(b,null,R(e.stallRental.requirements,l=>(i(),d("li",{key:l.name,class:"flex items-center justify-between bg-gray-50 p-2 rounded"},[t("span",oe,a(l.name),1),t("div",ie,[t("button",re,[l.url?(i(),d("a",{key:0,href:`${l.url}/${l.attachment}`,target:"_blank"}," View Attachment ",8,de)):w("",!0)])])]))),128))])]),((G=(X=e.stallRental)==null?void 0:X.approvals)==null?void 0:G.length)>0?(i(),d("div",me,[s[19]||(s[19]=t("h3",{class:"text-md font-semibold mb-3 text-primary"},"Approvals",-1)),t("ul",ue,[t("li",ce,[t("ul",xe,[(i(!0),d(b,null,R((K=e.stallRental)==null?void 0:K.approvals,(l,c)=>{var y,o;return i(),d("li",{key:c,class:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg shadow-sm"},[t("div",ge,[t("span",null,[t("strong",_e,a(`${l==null?void 0:l.department}: `),1),t("span",ye,a(`${(y=l==null?void 0:l.approver)==null?void 0:y.name}(${(o=l==null?void 0:l.approver)==null?void 0:o.position}) - ${n.status(l.status).status}`),1)])])])}),128))])])])])):w("",!0),t("div",fe,[t("button",{onClick:s[0]||(s[0]=l=>n.goToEdit(e.stallRental.id)),class:x(((W=(U=e.stallRental)==null?void 0:U.permits)==null?void 0:W.status)===0||(Y=e.stallRental)!=null&&Y.expiringSoon?"p-2 rounded-lg h bg-blue-600 text-white over:bg-blue-700":"p-2 rounded-lg h bg-blue-100 text-white over:bg-blue-100"),disabled:(($=(Z=e.stallRental)==null?void 0:Z.permits)==null?void 0:$.status)!==0||((tt=e.stallRental)==null?void 0:tt.expiringSoon)}," Edit ",10,he),t("button",{onClick:s[1]||(s[1]=l=>n.goToReupload(e.stallRental.id)),class:x(["p-2 rounded-lg hover:bg-red-200",((st=(et=e.stallRental)==null?void 0:et.permits)==null?void 0:st.status)===2||(lt=e.stallRental)!=null&&lt.expiringSoon?"bg-red-600 text-white":"bg-red-200 text-white"]),disabled:((nt=(at=e.stallRental)==null?void 0:at.permits)==null?void 0:nt.status)!==2||((ot=e.stallRental)==null?void 0:ot.expiringSoon)}," Reupload Requirements ",10,be),t("button",{onClick:s[2]||(s[2]=l=>n.goToEdit(e.stallRental.id)),class:x((it=e.stallRental)!=null&&it.expiringSoon?"p-2 rounded-lg h bg-green-600 text-white over:bg-green-700":"p-2 rounded-lg h bg-green-100 text-white over:bg-green-100"),disabled:!((rt=e.stallRental)!=null&&rt.expiringSoon)}," Renew ",10,Re)])]),t("div",ve,[s[21]||(s[21]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-xl font-bold text-secondary"}," Payment History ")],-1)),mt(n.BaseTable,{headers:n.headers,data:(dt=e.stallRental)==null?void 0:dt.payments_history,class:x("center text-center sticky right-0 bg-white z-10")},{row:h(({data:l})=>{var c,y;return[(i(!0),d(b,null,R(l,(o,De)=>(i(),d("tr",{key:e.stallRental.id,class:"hover:bg-gray-50"},[t("td",Se,a(o==null?void 0:o.date),1),t("td",we,a(n.formatAmount(o==null?void 0:o.amount)),1),t("td",pe,a(o==null?void 0:o.reference_number),1),t("td",ke,a(o==null?void 0:o.receipt),1)]))),128)),((y=(c=e.stallRental)==null?void 0:c.payments_history)==null?void 0:y.length)===0?(i(),d("tr",Ae,[...s[20]||(s[20]=[t("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):w("",!0)]}),_:1},8,["data"])])]}),_:1})}const Ve=St(wt,[["render",Ne],["__file","Details.vue"]]);export{Ve as default};
