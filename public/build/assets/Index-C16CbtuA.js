import{b as E,e as O}from"./helper-ugt-wfEi.js";import{c as w,o as l,w as i,a,t as n,e as h,b as p,m as U,v as C,n as T,f as V,d as y,F as G,r as R,g as N,h as P,u as L,i as j,j as z,l as q}from"./app-Dn5hSVff.js";import{l as S,p as M}from"./pickBy-HuIqfLR-.js";import{A as H}from"./AppLayout-crldu6Ed.js";import{B as J}from"./BaseTable-DGQZUMvW.js";import{P as K}from"./Pagination-BhP6-E6-.js";import{S as Q}from"./SearchFilter-DIpa9T9P.js";import{B as W}from"./Badge-OLW6Uprd.js";import{I as X}from"./Icons-Bno68vlE.js";import{F as Y}from"./FlashMessage-DG_xZ-Lh.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-m2FTI0Xb.js";import"./Footer-D050DcHE.js";const $={__name:"Index",props:{users:Object,filters:Object},setup(c,{expose:s}){var o,d;s();const f=N(null),t=["Name","Email","Mobile","Address","Birthday","Gender","Status","Actions"],r=c,m=P({search:(o=r==null?void 0:r.filters)==null?void 0:o.search,category:(d=r==null?void 0:r.filters)==null?void 0:d.category}),g=L({_method:"PUT",first_name:"",middle_name:"",last_name:"",email:"",birthday:"",address:"",photo:""});j(m,S.throttle(()=>{var e;z.get(`/admin/users?role=${(e=r==null?void 0:r.filters)==null?void 0:e.role}`,M(m),{preserveState:!0})},150),{deep:!0});function b(){var B,x;let e;switch((x=(B=r==null?void 0:r.filters)==null?void 0:B.role)==null?void 0:x.toLowerCase()){case"sub-admin":e="Admins";break;case"inspector":e="Inspectors";break;default:e="Vendors";break}return e}const _=()=>{f.value=!0},k=()=>{g.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>clearPhotoFileInput()})};function v(){console.log(m),Object.assign(m,S.mapValues(m,()=>null))}const u={verificationLinkSent:f,headers:t,props:r,form:m,forms:g,getPageName:b,sendEmailVerification:_,updateProfileInformation:k,reset:v,get checkDateStatus(){return O},get formatDate(){return E},watch:j,reactive:P,ref:N,get Link(){return q},get router(){return z},get useForm(){return L},get throttle(){return S.throttle},get mapValues(){return S.mapValues},get pickBy(){return M},AppLayout:H,BaseTable:J,Pagination:K,SearchFilter:Q,Badge:W,Icon:X,FlashMessage:Y};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},ee={class:"mb-8 text-3xl font-bold text-primary"},te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"flex items-center justify-between mb-6"},se={class:"px-4 py-3 capitalize"},re={class:"px-4 py-3"},oe={class:"px-4 py-3 capitalize"},le={class:"px-4 py-3 capitalize"},ie={class:"px-4 py-3 capitalize"},ne={class:"px-4 py-3 capitalize"},de={class:"px-4 py-3 capitalize"},ce={key:0,class:"px-4 py-3 capitalize"},me={key:1,class:"w-px border-t"},pe={key:0},fe={class:"mt-6 flex justify-center"};function he(c,s,f,t,r,m){return l(),w(t.AppLayout,{title:"Users"},{header:i(()=>[...s[2]||(s[2]=[a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Users ",-1)])]),default:i(()=>{var g,b,_,k,v,u;return[a("h1",ee,n(t.getPageName()),1),a("div",te,[c.$page.props.flash.success?(l(),w(t.FlashMessage,{key:0,message:c.$page.props.flash.success,type:"success"},null,8,["message"])):h("",!0),c.$page.props.flash.error?(l(),w(t.FlashMessage,{key:1,message:c.$page.props.flash.error,type:"error"},null,8,["message"])):h("",!0),a("div",ae,[p(t.SearchFilter,{modelValue:t.form.search,"onUpdate:modelValue":s[1]||(s[1]=o=>t.form.search=o),class:"mr-4 w-full max-w-md",onReset:t.reset},{default:i(()=>[s[4]||(s[4]=a("label",{class:"block text-gray-700"},"Gender:",-1)),U(a("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.form.gender=o),class:"form-select mt-1 w-full"},[...s[3]||(s[3]=[a("option",{value:null},"All",-1),a("option",{value:1},"Female",-1),a("option",{value:2},"Male",-1),a("option",{value:3},"Other",-1)])],512),[[C,t.form.gender]])]),_:1},8,["modelValue"]),((b=(g=t.props)==null?void 0:g.filters)==null?void 0:b.role)!=="vendor"?(l(),w(t.Link,{key:0,type:"submit",class:T([{"opacity-25":t.form.processing},"bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"]),disabled:t.form.processing,href:`/admin/users/create?role=${(k=(_=t.props)==null?void 0:_.filters)==null?void 0:k.role}`},{default:i(()=>{var o,d;return[V(n(((d=(o=t.props)==null?void 0:o.filters)==null?void 0:d.role)==="inspector"?"Add Inspector":"Add Admin"),1)]}),_:1},8,["class","disabled","href"])):h("",!0)]),p(t.BaseTable,{headers:t.headers,data:(v=f.users)==null?void 0:v.data},{header:i(()=>[...s[5]||(s[5]=[a("th",{class:"px-4 py-3 text-left"},"Name",-1),a("th",{class:"px-4 py-3 text-left"},"Email",-1),a("th",{class:"px-4 py-3 text-left"},"Mobile",-1),a("th",{class:"px-4 py-3 text-left"},"Address",-1),a("th",{class:"px-4 py-3 text-left"},"Birthday",-1),a("th",{class:"px-4 py-3 text-left"},"Gender",-1),a("th",{class:"px-4 py-3 text-left"},"Status",-1)])]),row:i(({data:o})=>{var d;return[(l(!0),y(G,null,R(o,(e,B)=>{var x,A,F,D,I;return l(),y("tr",{key:e.id,class:"hover:bg-gray-50"},[a("td",se,n(e.name),1),a("td",re,n(e.email),1),a("td",oe,n(e.mobile),1),a("td",le,n(e.address),1),a("td",ie,n(t.formatDate(e.birthDay)),1),a("td",ne,n((x=e==null?void 0:e.genders)==null?void 0:x.name),1),a("td",de,[p(t.Badge,{color:e!=null&&e.status?"green":"red"},{default:i(()=>[V(n(e!=null&&e.status?"Active":"Not Active"),1)]),_:2},1032,["color"])]),t.checkDateStatus(new Date(e==null?void 0:e.joinDate))&&!(e!=null&&e.status)?(l(),y("td",ce,[p(t.Link,{method:"post",as:"button",href:c.route("verification.send",e.id),class:"w-full bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"},{default:i(()=>[...s[6]||(s[6]=[V(" Resend Verification Email ",-1)])]),_:1},8,["href"])])):h("",!0),((F=(A=t.props)==null?void 0:A.filters)==null?void 0:F.role)!=="user"?(l(),y("td",me,[p(t.Link,{class:"flex items-center px-4",href:`/admin/users/update/${e.id}/edit?role=${(I=(D=t.props)==null?void 0:D.filters)==null?void 0:I.role}`,tabindex:"-1"},{default:i(()=>[p(t.Icon,{name:"cheveron-right",class:"block w-6 h-6 fill-primary"})]),_:1},8,["href"])])):h("",!0)])}),128)),((d=f.users)==null?void 0:d.total)===0?(l(),y("tr",pe,[...s[7]||(s[7]=[a("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):h("",!0)]}),_:1},8,["data"])]),a("div",fe,[p(t.Pagination,{links:(u=f.users)==null?void 0:u.links},null,8,["links"])])]}),_:1})}const Fe=Z($,[["render",he],["__file","Index.vue"]]);export{Fe as default};
