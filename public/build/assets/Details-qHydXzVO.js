import{c as ct,o as i,w as f,a as t,b as rt,f as u,t as l,d,e as w,n as x,F as h,r as R,L as dt,j as S,l as xt}from"./app-C8gNLm2U.js";import{f as bt,g as yt,a as _t,c as gt}from"./helper-ugt-wfEi.js";import{A as ft}from"./AppLayout-DzbOefLq.js";import{B as ht}from"./BaseTable-ClfkYX2V.js";import{_ as Rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-BXvjXTT5.js";import"./Icons-BmJx25aZ.js";import"./Footer-DbQcsbo_.js";const vt={__name:"Details",props:{tableRental:Object,auth:Object},setup(k,{expose:e}){e();const s=k,n=dt(()=>{var r,y;return((y=(r=s.tableRental)==null?void 0:r.vendor)==null?void 0:y.first_name.split(" ")).map(g=>g[0]).join("")}),b={props:s,initials:n,headers:["Date","Amount","Reference Number","Receipt"],goToEdit:m=>{S.get(`/my-rentals/table-spaces/${m}/edit`)},goToReupload:m=>{S.get(`/my-rentals/table-spaces/${m}/reupload`)},status:m=>{let r={color:"blue",status:"Vacant"};switch(m){case 3:r={color:"orange",status:"Expired"};break;case 2:r={color:"red",status:"Rejected"};break;case 1:r={color:"green",status:"Approved"};break;default:r={color:"blue",status:"Pending"}}return r},computed:dt,get Link(){return xt},get router(){return S},get formatAmount(){return gt},get formatDateShort(){return _t},get formatStallStatus(){return yt},get fullName(){return bt},AppLayout:ft,BaseTable:ht};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},pt={class:"mb-8 text-3xl font-bold"},wt={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto"},St={class:"flex items-center justify-between"},kt={class:"text-sm text-gray-600"},Tt={class:"flex gap-6"},At={class:"flex flex-col items-center"},Dt={class:"w-16 h-16 rounded-full bg-primary text-white flex items-center justify-center font-bold text-lg"},Nt={class:"mt-2 text-xs px-2 py-0.5 rounded bg-green-100 text-green-600 font-medium"},jt={class:"flex-1"},Bt={class:"text-lg font-semibold text-primary"},Ct={class:"text-sm text-gray-600"},Et=["href"],Pt={class:"text-sm text-gray-600"},zt={class:"grid grid-cols-2 gap-4 text-sm text-gray-700"},Vt={class:"text-sm text-gray-700 mb-2"},Lt={class:"text-gray-600"},Ot={class:"text-gray-600"},Ft={class:"text-gray-600"},qt={class:"text-gray-600"},Ht={class:"text-gray-600"},It={class:"text-gray-600"},Mt={class:"text-gray-600"},Qt={class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},Gt={class:"space-y-2"},Jt={class:"flex items-center space-x-2"},Kt={class:"text-secondary"},Ut={class:"text-gray-600"},Wt={class:"text-gray-600"},Xt={class:"font-bold"},Yt={class:"text-gray-600"},Zt={class:"text-red-500 font-semibold"},$t={class:"text-gray-600"},te={class:"font-bold text-secondary"},ee={class:"text-green-600 font-semibold"},se={class:"space-y-2 text-sm"},ae={class:"text-gray-600"},le={class:"flex gap-2"},ne={class:"px-2 py-1 text-xs rounded bg-blue-100 text-blue-600 hover:bg-blue-200"},oe=["href"],ie={key:0,class:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm"},re={class:"space-y-2 text-sm"},de={class:"flex items-center space-x-2"},me={class:"space-y-2"},ue={class:"flex items-center space-x-2"},ce={class:"text-secondary"},xe={class:"text-gray-600"},be={class:"flex justify-end gap-2"},ye=["disabled"],_e=["disabled"],ge=["disabled"],fe={class:"max-w-4xl mx-auto bg-white rounded-xl shadow p-6 space-y-6 max-h-[70vh] overflow-auto mt-5"},he={class:"px-4 py-3 capitalize"},Re={class:"px-4 py-3 capitalize"},ve={class:"px-4 py-3 capitalize"},pe={class:"px-4 py-3"},we={key:0};function Se(k,e,s,n,mt,ut){return i(),ct(n.AppLayout,{title:"Stall Types"},{header:f(()=>[...e[3]||(e[3]=[t("h2",{class:"font-semibold text-xl text-secondary leading-tight"}," Stall Types ",-1)])]),default:f(()=>{var v,p,b,m,r,y,g,T,A,D,N,j,B,C,E,P,z,V,L,O,F,q,H,I,M,Q,G,J,K,U,W,X,Y,Z,$,tt,et,st,at,lt,nt,ot,it;return[t("h1",pt,[rt(n.Link,{class:"text-primary hover:text-secondary",href:"/my-rentals/table-spaces"},{default:f(()=>[...e[4]||(e[4]=[u("Table Spaces",-1)])]),_:1}),e[5]||(e[5]=t("span",{class:"text-secondary font-medium"},"/",-1)),u(" "+l((v=s.tableRental)==null?void 0:v.name),1)]),t("div",wt,[t("div",St,[e[6]||(e[6]=t("h1",{class:"text-xl font-bold text-secondary"}," Vendor Table Space Rental Details ",-1)),t("span",kt,"Rental No.: "+l(((b=(p=s.tableRental)==null?void 0:p.permits)==null?void 0:b.permit_number)||"-"),1)]),t("div",Tt,[t("div",At,[t("div",Dt,l(n.initials),1),t("span",Nt,l((r=(m=s.tableRental)==null?void 0:m.vendor)!=null&&r.status?"Active":"Not Active"),1)]),t("div",jt,[t("h2",Bt,l(n.fullName(s.tableRental.vendor)),1),t("p",Ct,[e[7]||(e[7]=u(" Email: ",-1)),t("a",{href:"mailto:"+((g=(y=s.tableRental)==null?void 0:y.vendor)==null?void 0:g.email),class:"text-blue-600 hover:underline"},l((T=s.tableRental)==null?void 0:T.vendor.email),9,Et)]),t("p",Pt,"Mobile: "+l((A=s.tableRental)==null?void 0:A.vendor.mobile),1)])]),t("div",zt,[t("div",null,[t("div",Vt,[t("p",Lt,[e[8]||(e[8]=t("span",{class:"font-semibold"},"Type:",-1)),u(" "+l((D=s.tableRental)==null?void 0:D.permits.type),1)]),t("p",Ot,[e[9]||(e[9]=t("span",{class:"font-semibold"},"Date Issued:",-1)),u(" "+l((j=(N=s.tableRental)==null?void 0:N.permits)!=null&&j.issued_date?n.formatDateShort((C=(B=s.tableRental)==null?void 0:B.permits)==null?void 0:C.issued_date):"-"),1)])]),e[10]||(e[10]=t("h3",{class:"font-semibold text-secondary"},"Table Details",-1)),t("p",Ft,"Business Name: "+l((E=s.tableRental)==null?void 0:E.business_name),1),t("p",qt,"Table Name: "+l((P=s.tableRental)==null?void 0:P.stalls.name),1),t("p",Ht,"Birthday: "+l(n.formatDateShort((z=s.tableRental)==null?void 0:z.vendor.birthday)),1),t("p",It,"Address: "+l((V=s.tableRental)==null?void 0:V.vendor.address),1)]),t("div",null,[e[11]||(e[11]=t("h3",{class:"font-semibold text-secondary"},"Category",-1)),t("p",Mt,l((O=(L=s.tableRental)==null?void 0:L.stalls)==null?void 0:O.stallsCategories.name),1),e[12]||(e[12]=t("h3",{class:"font-semibold mt-2 text-secondary"},"Status",-1)),t("p",{class:x(`text-${n.formatStallStatus((F=s.tableRental.stalls)==null?void 0:F.status).color}-600`)},l(n.formatStallStatus((H=(q=s.tableRental)==null?void 0:q.stalls)==null?void 0:H.status).status),3)])]),t("div",Qt,[e[17]||(e[17]=t("h3",{class:"font-semibold text-secondary"},"Payment Details",-1)),t("ul",Gt,[(i(!0),d(h,null,R((I=s.tableRental)==null?void 0:I.paymentDetails.breakdown,(a,c)=>(i(),d("li",{key:c,class:"flex justify-between items-center px-3 py-2 text-sm"},[t("div",Jt,[t("span",null,[t("strong",Kt,l(a!=null&&a.size?`• ${a==null?void 0:a.type}(${a.size}): `:`• ${a==null?void 0:a.type}: `),1),t("span",Ut,l(n.formatAmount(a==null?void 0:a.amount)),1)])])]))),128))]),t("p",Wt,[e[13]||(e[13]=u(" Quarterly Payment: ",-1)),t("span",Xt,l(n.formatAmount(s.tableRental.quarterly_payment)),1)]),t("p",Yt,[e[14]||(e[14]=u(" Payment Due: ",-1)),t("span",Zt,l(s.tableRental.next_payment_due?s.tableRental.next_payment_due:"N/A"),1)]),t("p",$t,[e[15]||(e[15]=u(" Current Payment Status: ",-1)),t("span",{class:x(((M=s.tableRental)==null?void 0:M.current_payment)==="Paid"?"text-green-600":"text-red-600")},l(s.tableRental.current_payment),3)]),t("p",te,[e[16]||(e[16]=u(" Total: ",-1)),t("span",ee,l(n.formatAmount(s.tableRental.quarterly_payment)),1)])]),t("div",null,[e[18]||(e[18]=t("h3",{class:"font-semibold text-secondary mb-2 text-sm"},"Requirements",-1)),t("ul",se,[(i(!0),d(h,null,R(s.tableRental.requirements,a=>(i(),d("li",{key:a.name,class:"flex items-center justify-between bg-gray-50 p-2 rounded"},[t("span",ae,l(a.name),1),t("div",le,[t("button",ne,[a.url?(i(),d("a",{key:0,href:`${a.url}/${a.attachment}`,target:"_blank"}," View Attachment ",8,oe)):w("",!0)])])]))),128))])]),((G=(Q=s.tableRental)==null?void 0:Q.approvals)==null?void 0:G.length)>0?(i(),d("div",ie,[e[19]||(e[19]=t("h3",{class:"text-md font-semibold mb-3 text-primary"},"Approvals",-1)),t("ul",re,[t("li",de,[t("ul",me,[(i(!0),d(h,null,R((J=s.tableRental)==null?void 0:J.approvals,(a,c)=>{var _,o;return i(),d("li",{key:c,class:"flex justify-between items-center bg-gray-50 px-3 py-2 rounded-lg shadow-sm"},[t("div",ue,[t("span",null,[t("strong",ce,l(`${a==null?void 0:a.department}: `),1),t("span",xe,l(`${(_=a==null?void 0:a.approver)==null?void 0:_.name}(${(o=a==null?void 0:a.approver)==null?void 0:o.position}) - ${n.status(a.status).status}`),1)])])])}),128))])])])])):w("",!0),t("div",be,[t("button",{onClick:e[0]||(e[0]=a=>n.goToEdit(s.tableRental.id)),class:x(((U=(K=s.tableRental)==null?void 0:K.permits)==null?void 0:U.status)===0||(W=s.tableRental)!=null&&W.expiringSoon?"p-2 rounded-lg h bg-blue-600 text-white over:bg-blue-700":"p-2 rounded-lg h bg-blue-100 text-white over:bg-blue-100"),disabled:((Y=(X=s.tableRental)==null?void 0:X.permits)==null?void 0:Y.status)!==0||((Z=s.tableRental)==null?void 0:Z.expiringSoon)}," Edit ",10,ye),t("button",{onClick:e[1]||(e[1]=a=>n.goToReupload(s.tableRental.id)),class:x(["p-2 rounded-lg hover:bg-red-200",((tt=($=s.tableRental)==null?void 0:$.permits)==null?void 0:tt.status)===2||(et=s.tableRental)!=null&&et.expiringSoon?"bg-red-600 text-white":"bg-red-200 text-white"]),disabled:((at=(st=s.tableRental)==null?void 0:st.permits)==null?void 0:at.status)!==2||((lt=s.tableRental)==null?void 0:lt.expiringSoon)}," Reupload Requirements ",10,_e),t("button",{onClick:e[2]||(e[2]=a=>n.goToEdit(s.tableRental.id)),class:x((nt=s.tableRental)!=null&&nt.expiringSoon?"p-2 rounded-lg h bg-green-600 text-white over:bg-green-700":"p-2 rounded-lg h bg-green-100 text-white over:bg-green-100"),disabled:!((ot=s.tableRental)!=null&&ot.expiringSoon)}," Renew ",10,ge)])]),t("div",fe,[e[21]||(e[21]=t("div",{class:"flex items-center justify-between"},[t("h1",{class:"text-xl font-bold text-secondary"}," Payment History ")],-1)),rt(n.BaseTable,{headers:n.headers,data:(it=s.tableRental)==null?void 0:it.payments_history,class:x("center text-center sticky right-0 bg-white z-10")},{row:f(({data:a})=>{var c,_;return[(i(!0),d(h,null,R(a,(o,ke)=>(i(),d("tr",{key:s.tableRental.id,class:"hover:bg-gray-50"},[t("td",he,l(o==null?void 0:o.date),1),t("td",Re,l(n.formatAmount(o==null?void 0:o.amount)),1),t("td",ve,l(o==null?void 0:o.reference_number),1),t("td",pe,l(o==null?void 0:o.receipt),1)]))),128)),((_=(c=s.tableRental)==null?void 0:c.payments_history)==null?void 0:_.length)===0?(i(),d("tr",we,[...e[20]||(e[20]=[t("td",{class:"px-6 py-4 border-t text-center",colspan:"7"},"No records found.",-1)])])):w("",!0)]}),_:1},8,["data"])])]}),_:1})}const Pe=Rt(vt,[["render",Se],["__file","Details.vue"]]);export{Pe as default};
