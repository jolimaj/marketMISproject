import{j as F,c as x,o as i,w as p,a,e as _,b as d,n as S,f as h,d as y,F as L,r as T,t as s,h as j,i as N,Q as P,S as E}from"./app-BkL1CNwx.js";import{l as k,p as C}from"./pickBy-DBz4G69m.js";import{A as I}from"./AppLayout-BPPdX9d-.js";import{B as M}from"./BaseTable-COYnGHVO.js";import{P as O}from"./Pagination-DySzg0s6.js";import{I as q}from"./Icons-DwfuqtxP.js";import{b as Q}from"./helper-Jpd2WSUx.js";import{B as W}from"./Badge-km_yutmJ.js";import{F as G}from"./FlashMessage-BQau8JjT.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Logo-DeUXyAzp.js";import"./Footer-DHOCUsg6.js";const J={__name:"VolanteRental",props:{volanteRentals:Object,filters:Object},setup(l,{expose:o}){var u;o();const c=["Rental No.","Business Name","Transient/Tent","Location","Duration","Area of Square Meter","Category","Applicant","Duration Period","Status"],t=l,f=j({search:(u=t==null?void 0:t.filters)==null?void 0:u.search});N(f,k.throttle(()=>{P.get("/my-applications/volante-rental-permit",C(f),{preserveState:!0})},150),{deep:!0});function v(n){let r="";return n===1?r="Daily":n===2?r="Weekly":r="Event based",r}const m={headers:c,props:t,form:f,duration:v,status:n=>{let r={};switch(n){case 3:r={color:"orange",status:"Expired"};break;case 3:r={color:"red",status:"Rejected"};break;case 1:r={color:"green",status:"Approved"};break;default:r={color:"blue",status:"Pending"}}return r},watch:N,reactive:j,get Link(){return E},get router(){return P},get throttle(){return k.throttle},get mapValues(){return k.mapValues},get pickBy(){return C},AppLayout:I,BaseTable:M,Pagination:O,Icon:q,get formatDate(){return Q},Badge:W,FlashMessage:G};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},U={class:"flex items-center justify-end mb-6 md:justify-self-center w-full"},X={class:"px-4 py-3 capitalize text-center"},Y={class:"px-4 py-3 capitalize text-center"},Z={class:"px-4 py-3 capitalize text-center"},$={class:"px-4 py-3 capitalize text-center"},b={class:"px-4 py-3 capitalize text-center"},ee={class:"px-4 py-3 capitalize text-center"},te={class:"px-4 py-3 capitalize text-center"},ae={class:"px-4 py-3 capitalize text-center"},re={class:"px-4 py-3 capitalize text-center"},oe={class:"px-4 py-3 capitalize text-center"},se={key:0,class:"w-px border-t"},le={key:0},ie={class:"mt-6 flex justify-center"};function ce(l,o,c,t,f,v){const w=F("Icons");return i(),x(t.AppLayout,{title:"Volante"},{header:p(()=>[...o[0]||(o[0]=[a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Volante ",-1)])]),default:p(()=>{var m,u;return[o[3]||(o[3]=a("h1",{class:"mb-8 text-3xl font-bold text-primary"},"Volante Rentals",-1)),a("div",K,[l.$page.props.flash.success?(i(),x(t.FlashMessage,{key:0,message:l.$page.props.flash.success,type:"success"},null,8,["message"])):_("",!0),l.$page.props.flash.error?(i(),x(t.FlashMessage,{key:1,message:l.$page.props.flash.error,type:"error"},null,8,["message"])):_("",!0),a("div",U,[d(t.Link,{type:"submit",class:S([{"opacity-25":t.form.processing},"bg-btn-gradient text-white font-bold uppercase px-5 py-2 rounded focus:outline-none shadow hover:bg-primary-700 transition-colors"]),disabled:t.form.processing,href:"/my-rentals/market-volante/create"},{default:p(()=>[...o[1]||(o[1]=[h("Apply for New Permit",-1)])]),_:1},8,["class","disabled"])]),d(t.BaseTable,{headers:t.headers,data:(m=c.volanteRentals)==null?void 0:m.data},{row:p(({data:n})=>{var r;return[(i(!0),y(L,null,T(n,(e,ne)=>{var B,V,z,D,R,A;return i(),y("tr",{key:c.volanteRentals.id,class:"hover:bg-gray-50"},[a("td",X,s((B=e==null?void 0:e.permits)!=null&&B.permit_number?`${(V=e==null?void 0:e.permits)==null?void 0:V.permit_number}`:"-"),1),a("td",Y,s(`${(z=e.vendor)==null?void 0:z.first_name} ${e.vendor.last_name}`),1),a("td",Z,s(e.name),1),a("td",$,s(e!=null&&e.start_date&&(e!=null&&e.end_date)?`${t.formatDate(e.start_date)} - ${t.formatDate(e.end_date)}`:"-"),1),a("td",b,[d(t.Badge,{color:((D=e==null?void 0:e.permits)==null?void 0:D.type)==="new"?"green":"blue"},{default:p(()=>{var g;return[h(s((g=e==null?void 0:e.permits)==null?void 0:g.type),1)]}),_:2},1032,["color"])]),a("td",ee,s(l.formatAmount(e==null?void 0:e.quarterly_payment)),1),a("td",te,s(t.formatDate(new Date(e==null?void 0:e.next_payment_due))),1),a("td",ae,s(l.formatAmount(e==null?void 0:e.penalty)),1),a("td",re,[a("p",{class:S(["font-semibold",(e==null?void 0:e.current_payment)==="Paid"?"text-green-600":"text-red-600"])},s(e==null?void 0:e.current_payment),3)]),a("td",oe,[d(t.Badge,{color:t.status(e.permits.status).color},{default:p(()=>[h(s(t.status(e.permits.status).status),1)]),_:2},1032,["color"])]),((A=(R=t.props)==null?void 0:R.filters)==null?void 0:A.role)!=="user"?(i(),y("td",se,[d(w,{name:"cheveron-right",onClick:g=>l.getDetails(e),class:"block w-6 h-6 fill-primary"},null,8,["onClick"])])):_("",!0)])}),128)),((r=c.volanteRentals)==null?void 0:r.total)===0?(i(),y("tr",le,[...o[2]||(o[2]=[a("td",{class:"px-6 py-4 border-t text-center",colspan:"11"},"No records found.",-1)])])):_("",!0)]}),_:1},8,["data"])]),a("div",ie,[d(t.Pagination,{links:(u=c.volanteRentals)==null?void 0:u.links},null,8,["links"])])]}),_:1})}const we=H(J,[["render",ce],["__file","VolanteRental.vue"]]);export{we as default};
